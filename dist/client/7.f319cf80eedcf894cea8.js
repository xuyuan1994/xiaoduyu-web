(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=v();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var r=a?Object.getOwnPropertyDescriptor(e,l):null;r&&(r.get||r.set)?Object.defineProperty(n,l,r):n[l]=e[l]}}n.default=e,t&&t.set(e,n);return n}(n(0)),l=_(n(277)),r=n(77),o=n(168),u=n(817),i=n(285),c=_(n(779)),s=_(n(780)),d=_(n(783)),f=_(n(855)),m=_(n(857)),p=_(n(782));function _(e){return e&&e.__esModule?e:{default:e}}function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function E(e,t,n,a,l,r,o){try{var u=e[r](o),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(a,l)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,l=!1,r=void 0;try{for(var o,u=e[Symbol.iterator]();!(a=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var b=function(e){var t=e.setNotFound,n=(0,l.default)(),c=(n.location,n.match.params.id),_=(0,o.useStore)(),v=(0,o.useSelector)((function(e){return(0,i.getPeopleListById)(e,c)}))||{},E=v.data,b=void 0===E?[]:E,w=v.loading,g=(v.more,b[0]||null);return(0,a.useEffect)((function(){var e;g||(e={id:c,args:{_id:c,blocked:!1}},(0,u.loadPeopleList)(e)(_.dispatch,_.getState)).then((function(e){var n=y(e,2),a=(n[0],n[1]);a&&a.data&&!a.data[0]&&t("该用户不存在")}))}),[]),!g||w?a.default.createElement("div",{className:"text-center"},a.default.createElement(d.default,null)):a.default.createElement(p.default,null,a.default.createElement(s.default,{title:g.nickname},a.default.createElement("meta",{property:"og:locale",content:"zh_CN"}),a.default.createElement("meta",{property:"og:type",content:"profile"}),a.default.createElement("meta",{property:"og:title",content:g.nickname}),g.brief?a.default.createElement("meta",{name:"description",content:"".concat(g.brief)}):null,a.default.createElement("meta",{property:"og:url",content:"".concat(r.domainName,"/people/").concat(g._id)}),a.default.createElement("meta",{property:"og:site_name",content:r.name}),a.default.createElement("meta",{property:"og:image",content:g.avatar_url?"https:"+g.avatar_url:r.domainName+"./512x512.png"})),a.default.createElement(m.default,{people:g}),a.default.createElement(f.default,{people:g}))};b.loadDataOnServer=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,a,l,r,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.store,a=t.match,t.res,t.req,!t.user){e.next=3;break}return e.abrupt("return",{code:200});case 3:return l=a.params.id,e.next=6,(0,u.loadPeopleList)({id:l,args:{_id:l,blocked:!1}})(n.dispatch,n.getState);case 6:if(r=e.sent,o=y(r,2),i=o[0],c=o[1],!i&&c&&0!=c.length){e.next=14;break}return e.abrupt("return",{code:404,text:"该用户不存在"});case 14:return e.abrupt("return",{code:200});case 15:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,l){var r=e.apply(t,n);function o(e){E(r,a,l,o,u,"next",e)}function u(e){E(r,a,l,o,u,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();var w=(0,c.default)(b);t.default=w},782:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.children;return l.default.createElement("div",{className:"container"},l.default.createElement("div",{className:"_3RUsQ"},t))};var a,l=(a=n(0))&&a.__esModule?a:{default:a};n(692)},789:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){var n=t.posts,a=t.user,c=t.topic,s=t.className,d=void 0===s?"btn btn-outline-primary btn-sm rounded-pill":s,f=t.activeClassName,m=void 0===f?"btn btn-outline-secondary btn-sm rounded-pill":f,p=n||a||c,_=(0,r.useSelector)((function(e){return(0,u.getUserInfo)(e)})),v=(0,r.useStore)();if(_&&n&&n.user_id&&n.user_id._id==_._id||_&&a&&a._id==_._id)return"";var E="关注",y=l.default.createElement("svg",{width:"15px",height:"15px",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",className:"mr-1"},l.default.createElement("use",{xlinkHref:"/feather-sprite.svg#plus"}));n&&(E="收藏",y=null);p.follow&&(y=null);return _?p.follow?l.default.createElement("span",{className:m,onClick:function(e){e.stopPropagation();var t={};n&&(t.posts_id=n._id),a&&(t.user_id=a._id),c&&(t.topic_id=c._id),function(e){return(0,o.unfollow)(e)(v.dispatch,v.getState)}({args:t}).then((function(e){var t=i(e,2),n=t[0];t[1];n&&Toastify({text:n,duration:3e3,backgroundColor:"linear-gradient(to right, #0988fe, #1c75fb)"}).showToast()}))}},y,"正在",E):l.default.createElement("span",{className:d,onClick:function(t){t.stopPropagation();var l={};n&&(l.posts_id=n._id),a&&(l.user_id=a._id),c&&(l.topic_id=c._id),function(e){return(0,o.follow)(e)(v.dispatch,v.getState)}({args:l}).then((function(t){var n=i(t,2),a=n[0];n[1];a&&e.toast({text:a,position:"top-center",showHideTransition:"slide",icon:"info",loader:!1,allowToastClose:!1})}))}},y,E):l.default.createElement("span",{className:d,"data-toggle":"modal","data-target":"#sign",onClick:function(e){e.stopPropagation()}},y,E)};var a,l=(a=n(0))&&a.__esModule?a:{default:a},r=n(168),o=n(794),u=n(78);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,l=!1,r=void 0;try{for(var o,u=e[Symbol.iterator]();!(a=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n(699)}).call(this,n(68))},794:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unfollow=t.follow=t.findFollows=void 0;var a=l(n(48));function l(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,l=!1,r=void 0;try{for(var o,u=e[Symbol.iterator]();!(a=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t,n,a,l,r,o){try{var u=e[r](o),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(a,l)}var u=(0,l(n(117)).default)({reducerName:"follow",actionType:"SET_FOLLOW_LIST_BY_ID",api:"findFollows",fields:""});t.findFollows=u;var i=function(e){return function(t){var n=t.args;return function(t,l){return new Promise(function(){var u,i=(u=regeneratorRuntime.mark((function o(u){var i,c,s,d,f;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n.status=e,i=l().user.userInfo,o.next=4,(0,a.default)({type:"mutation",apis:[{api:"addFollow",args:n,fields:"success"}],headers:{accessToken:l().user.accessToken}});case 4:if(c=o.sent,s=r(c,2),d=s[0],f=s[1],!d){o.next=10;break}return o.abrupt("return",u([d?d.message:"未知错误"]));case 10:n.posts_id?(t({type:"UPDATE_FOLLOW",id:n.posts_id,followStatus:e,selfId:i._id}),t({type:"UPDATE_POSTS_FOLLOW",id:n.posts_id,followStatus:e})):n.user_id?(t({type:"UPDATE_FOLLOW",id:n.user_id,followStatus:e,selfId:i._id}),t({type:"UPDATE_POSTS_AUHTOR_FOLLOW",peopleId:n.user_id,followStatus:e,selfId:i._id}),t({type:"UPLOAD_PEOPLE_FOLLOW",peopleId:n.user_id,followStatus:e,selfId:i._id})):n.topic_id&&(t({type:"UPDATE_FOLLOW",id:n.topic_id,followStatus:e,selfId:i._id}),t({type:"UPDATE_TOPIC_FOLLOW",id:n.topic_id,followStatus:e})),u([null,f]);case 12:case"end":return o.stop()}}),o)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var l=u.apply(e,t);function r(e){o(l,n,a,r,i,"next",e)}function i(e){o(l,n,a,r,i,"throw",e)}r(void 0)}))});return function(e){return i.apply(this,arguments)}}())}}},c=i(!0);t.follow=c;var s=i(!1);t.unfollow=s},816:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.people_id,n=e.className,i=(0,l.default)().history,c=(0,r.useSelector)((function(e){return(0,o.getUserInfo)(e)})),s=(0,r.useStore)();if(c&&c._id&&c._id==t)return"";var d=a.default.createElement("svg",{width:"15px",height:"15px",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",className:"mr-1"},a.default.createElement("use",{xlinkHref:"/feather-sprite.svg#message-circle"}));return c?a.default.createElement("span",{className:n,onClick:function(e){var n;e.stopPropagation(),(n={people_id:t},(0,u.getSession)(n)(s.dispatch,s.getState)).then((function(e){e&&i.push("/session/".concat(e))}))}},d,"私信"):a.default.createElement("span",{className:n,"data-toggle":"modal","data-target":"#sign",onClick:function(e){e.stopPropagation()}},d,"私信")};var a=i(n(0)),l=i(n(277)),r=n(168),o=n(78),u=n(281);function i(e){return e&&e.__esModule?e:{default:e}}},817:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPeopleList=void 0;var a,l=n(171);var r=(0,((a=n(117))&&a.__esModule?a:{default:a}).default)({reducerName:"people",actionType:"SET_PEOPLE_LIST_BY_ID",api:"users",fields:"\n    _id\n    nickname_reset_at\n    create_at\n    last_sign_at\n    blocked\n    role\n    avatar\n    brief\n    source\n    posts_count\n    comment_count\n    fans_count\n    like_count\n    follow_people_count\n    follow_topic_count\n    follow_posts_count\n    block_people_count\n    block_posts_count\n    access_token\n    gender\n    nickname\n    banned_to_post\n    avatar_url\n    follow\n    user_cover\n  ",processList:function(e){return e.map((function(e){e._last_sign_at=(0,l.dateDiff)(e.last_sign_at),e._create_at=(0,l.dateDiff)(e.create_at),e._nickname_reset_at=(0,l.dateDiff)(e.nickname_reset_at),e._create_at=(0,l.dateDiff)(e.create_at)})),e}});t.loadPeopleList=r},855:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(n(0)),l=n(115),r=c(n(277)),o=c(n(856)),u=c(n(797)),i=c(n(812));function c(e){return e&&e.__esModule?e:{default:e}}n(745);t.default=function(e){var t=e.people,n=(0,r.default)(),c=(n.history,n.location),s=(n.match,t._id),d={"/comments":a.default.createElement(i.default,{id:s+"-people",itemType:"text",query:{user_id:s,sort_by:"create_at",parent_id:"not-exists",deleted:!1,weaken:!1},fields:"\n        content_html\n        create_at\n        reply_count\n        like_count\n        _id\n        posts_id{\n          _id\n          title\n        }\n      ",showPagination:!0}),"/fans":a.default.createElement(o.default,{id:"fans-"+s,query:{people_id:s,sort_by:"create_at",deleted:!1},fields:"\n        user_id {\n          _id\n          nickname\n          create_at\n          fans_count\n          comment_count\n          follow_people_count\n          follow\n          avatar_url\n          brief\n        }\n      ",scrollLoad:!0}),"/follow-peoples":a.default.createElement(o.default,{id:"people-"+s,query:{user_id:s,people_id:"exists",sort_by:"create_at",deleted:!1},fields:"\n        people_id {\n          _id\n          nickname\n          create_at\n          fans_count\n          comment_count\n          follow_people_count\n          follow\n          avatar_url\n          brief\n        }\n      ",scrollLoad:!0}),"/follow-topics":a.default.createElement(o.default,{id:"topic-"+s,query:{user_id:s,topic_id:"exists",sort_by:"create_at",deleted:!1},fields:"\n        topic_id {\n          _id\n          avatar\n          name\n          follow\n        }\n      ",scrollLoad:!0}),"/follow-posts":a.default.createElement(o.default,{id:"posts-"+s,query:{user_id:s,posts_id:"exists",sort_by:"create_at",deleted:!1},fields:"\n        posts_id {\n          _id\n          title\n          follow\n        }\n      ",scrollLoad:!0}),"/":a.default.createElement(u.default,{id:s,query:{user_id:s,sort_by:"create_at",deleted:!1},fields:"\n      _id\n      comment_count\n      reply_count\n      create_at\n      follow_count\n      like_count\n      title\n      topic_id{\n        _id\n        name\n      }\n      view_count\n      ",scrollLoad:!0})},f=c.pathname;return(f=f.replace("/people/"+t._id,""))||(f="/"),a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"card mb-0 border-top-0  border-bottom-0 rounded-0"},a.default.createElement("div",{className:"card-body p-0 pt-2 pb-2"},a.default.createElement("ul",{className:"nav justify-content-center"},a.default.createElement("li",{className:"nav-item"},a.default.createElement(l.NavLink,{className:"nav-link text-dark",exact:!0,to:"/people/".concat(t._id)},"帖子 ",t.posts_count||"")),a.default.createElement("li",{className:"nav-item"},a.default.createElement(l.NavLink,{className:"nav-link text-dark",exact:!0,to:"/people/".concat(t._id,"/comments")},"评论 ",t.comment_count||"")),a.default.createElement("li",{className:"nav-item"},a.default.createElement(l.NavLink,{className:"nav-link text-dark",exact:!0,to:"/people/".concat(t._id,"/fans")},"粉丝 ",t.fans_count||"")),a.default.createElement("li",{className:"nav-item"},a.default.createElement(l.NavLink,{className:"nav-link text-dark",exact:!0,to:"/people/".concat(t._id,"/follow-peoples")},"关注 ",t.follow_people_count||"")),a.default.createElement("li",{className:"nav-item"},a.default.createElement(l.NavLink,{className:"nav-link text-dark",exact:!0,to:"/people/".concat(t._id,"/follow-posts")},"收藏 ",t.follow_posts_count||"")),a.default.createElement("li",{className:"nav-item"},a.default.createElement(l.NavLink,{className:"nav-link text-dark",exact:!0,to:"/people/".concat(t._id,"/follow-topics")},"话题 ",t.follow_topic_count||""))))),a.default.createElement("div",{className:"card border-top _3fWML"},d[f]||null))}},856:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.id,n=(0,r.useStore)(),s=(0,r.useSelector)((function(e){return(0,u.getFollowListById)(e,t)}));return a.default.createElement(c.default,d({},e,s,{load:function(e){return(0,o.findFollows)(e)(n.dispatch,n.getState)},renderItem:function(e){var t=e.people_id||e.user_id||null,n=e.posts_id||null,r=e.topic_id||null,o=null,u=null;return t&&(u=t._id,o=a.default.createElement("div",{className:"_3lN-v"},a.default.createElement("img",{className:"_1YUZY",src:t.avatar_url}),a.default.createElement("div",{className:"d-flex justify-content-between"},a.default.createElement("div",null,a.default.createElement(l.Link,{to:"/people/".concat(t._id),className:"text-dark"},a.default.createElement("b",null,t.nickname)),t.brief?a.default.createElement("div",{className:"text-secondary"},t.brief):null,a.default.createElement("div",{className:"text-secondary _28PzR"},t.posts_count?a.default.createElement("small",null,"帖子 ",t.posts_count):null,t.comment_count?a.default.createElement("small",null,"评论 ",t.comment_count):null,t.fans_count?a.default.createElement("small",null,"粉丝 ",t.fans_count):null,t.follow_people_count?a.default.createElement("small",null,"关注用户 ",t.follow_people_count):null,t.follow_posts_count?a.default.createElement("small",null,"关注帖子 ",t.follow_posts_count):null,t.follow_topic_count?a.default.createElement("small",null,"话题 ",t.follow_topic_count):null)),a.default.createElement("div",{style:{minWidth:"70px",textAlign:"right"}},a.default.createElement(i.default,{user:t}))))),n&&(u=n._id,o=a.default.createElement("div",null,a.default.createElement("div",{className:"d-flex justify-content-between"},a.default.createElement("div",null,a.default.createElement(l.Link,{to:"/posts/".concat(n._id),className:"text-dark"},a.default.createElement("b",null,n.title))),a.default.createElement("div",null,a.default.createElement(i.default,{posts:n}))))),r&&(u=r._id,o=a.default.createElement("div",null,a.default.createElement("div",{className:"d-flex justify-content-between"},a.default.createElement("div",null,a.default.createElement(l.Link,{to:"/topic/".concat(r._id),className:"text-dark"},a.default.createElement("b",null,r.name))),a.default.createElement("div",null,a.default.createElement(i.default,{topic:r}))))),a.default.createElement("div",{className:"card mb-0 border-0 border-bottom",key:u},a.default.createElement("div",{className:"card-body"},o))}}))};var a=s(n(0)),l=n(115),r=n(168),o=n(794),u=n(295),i=s(n(789)),c=s(n(784));function s(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}n(744)},857:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(280)),l=i(n(0)),r=i(n(789)),o=i(n(816)),u=i(n(807));function i(e){return e&&e.__esModule?e:{default:e}}n(746);var c={"./styles/index.scss":{box:"_2Pf1c","cover-image":"_2wiOl",menu:"_2b5F_",avatar:"EHeby",actions:"kPGXW",content:"_q8po",male:"_1a7CE",female:"_3JjFp",brief:"_2BCCf",nickname:"_3paEG","other-info":"cOlPK"}};t.default=function(e){var t=e.people;return l.default.createElement("div",{className:"card border-bottom _2Pf1c"},l.default.createElement("div",{className:"_2wiOl",style:t.user_cover?{backgroundImage:"url(".concat(t.user_cover,")")}:null}),l.default.createElement("div",{className:"card-body"},l.default.createElement("div",null,l.default.createElement("div",{className:"text-center"},l.default.createElement("img",{className:"mb-2 EHeby",src:t.avatar_url.replace("thumbnail/!50","thumbnail/!300")})),l.default.createElement("div",{className:"text-center _q8po"},l.default.createElement("div",{className:"_3paEG"},t.nickname,Reflect.has(t,"gender")&&null!=t.gender?l.default.createElement("span",{className:(0,a.default)(1==t.gender?"male":"female",c)}):null),l.default.createElement("div",{className:"_2BCCf"},t.brief),l.default.createElement("div",{className:"text-muted"},l.default.createElement("small",null,"注册于",t._create_at))),l.default.createElement("div",{className:"text-center mt-3"},l.default.createElement(r.default,{user:t,className:"btn btn-outline-primary btn-sm rounded-pill"}),l.default.createElement(o.default,{people_id:t._id,className:"btn btn-outline-primary btn-sm rounded-pill ml-3"}),l.default.createElement(u.default,{user:t},l.default.createElement("span",{className:"btn btn-outline-secondary btn-sm rounded-pill ml-3"},l.default.createElement("svg",{width:"16px",height:"16px",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"},l.default.createElement("use",{xlinkHref:"/feather-sprite.svg#more-horizontal"}))))))))}}}]);