{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{754:function(e,t,r){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;var t=m();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}}r.default=e,t&&t.set(e,r);return r}(r(0)),a=p(r(277)),i=r(168),u=r(281),c=r(175),l=p(r(779)),o=p(r(780)),f=p(r(863)),s=p(r(865)),d=p(r(782));function p(e){return e&&e.__esModule?e:{default:e}}function m(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}r(757);var h=(0,l.default)((function(t){t.setNotFound;var r=((0,a.default)().match.params||{}).id,l=v((0,n.useState)(null),2),p=l[0],m=l[1],h=v((0,n.useState)(!0),2),g=h[0],y=h[1],b=(0,i.useSelector)((function(e){return(0,c.getSessionListById)(e,r)})),w=(0,i.useStore)(),_=function(t){t.unread_count>0&&setTimeout((function(){var e;e={_id:r},(0,u.readSession)(e)(w.dispatch,w.getState)}),1e3),m(t),y(!1),setTimeout((function(){var t=e(\"#content\").prop(\"scrollHeight\");e(\"#content\").scrollTop(t,200)}),500)};return(0,n.useEffect)((function(){if(b&&b.data&&b.data[0]){var e=b&&b.data?b.data[0]:null;_&&_(e)}else(t={id:r,args:{_id:r}},(0,u.loadSessionList)(t)(w.dispatch,w.getState)).then((function(e){var t=v(e,2),r=(t[0],t[1]);r&&r.data&&r.data[0]&&_&&_(r.data[0])}));var t;return function(){_=null}}),[b]),n.default.createElement(d.default,null,n.default.createElement(o.default,{title:p?p.user_id.nickname:\"loading...\"}),g?n.default.createElement(\"div\",null,\"loading...\"):null,p?n.default.createElement(\"div\",{className:\"card\"},n.default.createElement(\"div\",{className:\"card-header\"},n.default.createElement(\"div\",{className:\"card-title\"},p.user_id.nickname)),n.default.createElement(\"div\",null,n.default.createElement(\"div\",{id:\"content\",className:\"_2jN7q\"},n.default.createElement(f.default,{id:r,query:{user_id:p.user_id._id+\",\"+p.addressee_id._id,addressee_id:p.user_id._id+\",\"+p.addressee_id._id,sort_by:\"create_at:-1\"}})),!g&&p.user_id._id?n.default.createElement(\"div\",{className:\"border-top\"},n.default.createElement(s.default,{addressee_id:p.user_id._id})):null)):null)}));t.default=h}).call(this,r(68))},779:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=function(t){t.history;var r=t.location,o=t.match;t.staticContext;\"undefined\"!=typeof window&&i.set(\"history\",(0,a.default)().history);var f,s,d=(0,n.useState)(\"\"),p=(s=2,function(e){if(Array.isArray(e))return e}(f=d)||function(e,t){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}}(f,s)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()),m=p[0],v=p[1],h=(0,u.useStore)(),g=r.pathname,y=r.search;return r.params=y?(0,l.default)(y):{},(0,n.useEffect)((function(){return\"undefined\"!=typeof window&&\"/\"!=window.location.pathname&&(0,c.setScrollPosition)(g+y)(h.dispatch,h.getState),function(){\"undefined\"!=typeof window&&i.remove(\"history\")}}),[]),m?n.default.createElement(\"div\",{className:\"container text-center\"},m):n.default.createElement(e,{match:o,setNotFound:v})};return t.loadDataOnServer=e.loadDataOnServer||function(){return{code:200}},t};var n=s(r(0)),a=o(r(277)),i=s(r(116)),u=r(168),c=r(278),l=o(r(781));function o(e){return e&&e.__esModule?e:{default:e}}function f(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function s(e){if(e&&e.__esModule)return e;var t=f();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}}return r.default=e,t&&t.set(e,r),r}},780:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=e.title,r=e.children,n=(0,u.useSelector)((function(e){return(0,c.getUnreadNotice)(e)})),f=(0,u.useSelector)((function(e){return(0,l.getTipsById)(e,\"home\")||(0,l.getTipsById)(e,\"feed\")||(0,l.getTipsById)(e,\"favorite\")||(0,l.getTipsById)(e,\"excellent\")})),s=(0,u.useSelector)((function(e){return(0,l.getTipsById)(e,\"unread-message\")})),d=\"\";s&&(d+=\"(\".concat(s,\"条私信) \"));n&&n.length>0&&(d+=\"(\".concat(n.length,\"条通知) \"));f&&(d+=\"(有新动态) \");d+=t||o.name,t&&(d+=\" - \".concat(o.name));return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.ReactTitle,{title:d}),r?a.default.createElement(i.default,null,r):null)};var n,a=(n=r(0))&&n.__esModule?n:{default:n},i=function(e){if(e&&e.__esModule)return e;var t=f();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}}r.default=e,t&&t.set(e,r);return r}(r(691)),u=r(168),c=r(169),l=r(170),o=r(77);function f(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}},781:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var n=function(e){return e.substr(1).split(\"&\").reduce((function(e,t){if(t){var r=t.split(\"=\");e[r[0]]=r[1]||\"\"}return e}),{})};t.default=n},782:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=e.children;return a.default.createElement(\"div\",{className:\"container\"},a.default.createElement(\"div\",{className:\"_3RUsQ\"},t))};var n,a=(n=r(0))&&n.__esModule?n:{default:n};r(692)},783:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){e.size,e.position;return a.default.createElement(\"span\",{className:\"_3H7UH\"})};var n,a=(n=r(0))&&n.__esModule?n:{default:n};r(693)},784:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=e.id,r=e.query,u=e.fields,c=void 0===u?\"\":u,l=e.load,o=e.data,f=void 0===o?[]:o,s=e.loading,d=void 0===s||s,p=e.count,m=void 0===p?0:p,v=e.more,h=void 0===v||v,g=e.showPagination,y=void 0!==g&&g,b=e.scrollLoad,w=void 0!==b&&b,_=e.nothing,O=void 0===_?\"--- 无数据 ---\":_,E=e.filters,j=e.renderItem,k=e.renderHead,S=e.renderFooter,P=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l({id:t,args:r,fields:c,restart:e})};if((0,n.useEffect)((function(){return 0==f.length&&h&&P(),w&&ArriveFooter.add(t,P),function(){w&&ArriveFooter.remove(t)}}),[t]),!d&&f&&0==f.length&&!h&&O)return n.default.createElement(\"div\",{className:\"text-center text-secondary pt-3 pb-3\"},O);return n.default.createElement(n.default.Fragment,null,k?k({loadData:P}):null,f.map((function(e){return j(e)})),d&&y||h&&w?n.default.createElement(\"div\",{className:\"text-center pt-3 pb-3\"},n.default.createElement(a.default,null)):null,y&&E?n.default.createElement(i.default,{count:m||0,pageSize:E.page_size||0,pageNumber:E.page_number||0,onSelect:function(e){r.page_number=e,P(!0)}}):null,S?S({loadData:P}):null)};var n=function(e){if(e&&e.__esModule)return e;var t=c();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}}r.default=e,t&&t.set(e,r);return r}(r(0)),a=u(r(783)),i=u(r(786));function u(e){return e&&e.__esModule?e:{default:e}}function c(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}},786:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=e.count,r=void 0===t?0:t,n=e.pageSize,i=void 0===n?0:n,u=e.pageNumber,c=void 0===u?0:u,l=e.onSelect,o=Math.ceil(r/i);if(!r||1==o)return null;var f=c>1?c-1:0,s=c+1<=o?c+1:0;return a.default.createElement(\"nav\",{\"aria-label\":\"Page navigation\",className:\"mt-3\"},a.default.createElement(\"ul\",{className:\"pagination justify-content-center mb-3\"},a.default.createElement(\"li\",{className:\"page-item \".concat(f?\"\":\"disabled\")},a.default.createElement(\"div\",{className:\"page-link\",\"aria-label\":\"Previous\",onClick:function(){l(f)}},a.default.createElement(\"span\",{\"aria-hidden\":\"true\"},\"«\"),a.default.createElement(\"span\",{className:\"sr-only\"},\"Previous\"))),function(){for(var e=[],t=c+4>=o?o:c+4,r=function(t){e.push(a.default.createElement(\"li\",{className:\"page-item \".concat(c-1==t?\"active\":\"\"),key:t},a.default.createElement(\"div\",{className:\"page-link\",onClick:function(){l(t+1)}},t+1)))},n=c-5>=1?c-5:0;n<t;n++)r(n);return e}(),a.default.createElement(\"li\",{className:\"page-item \".concat(s?\"\":\"disabled\")},a.default.createElement(\"div\",{className:\"page-link\",\"aria-label\":\"Next\",onClick:function(){l(s)}},a.default.createElement(\"span\",{\"aria-hidden\":\"true\"},\"»\"),a.default.createElement(\"span\",{className:\"sr-only\"},\"Next\")))))};var n,a=(n=r(0))&&n.__esModule?n:{default:n}},787:function(e,t,r){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(t){var r=t.content,l=t.maxHeight;if(!r)return null;var o=f((0,n.useState)(r),2),s=o[0],d=o[1],p=f((0,n.useState)(!1),2),m=p[0],v=p[1],h=f((0,n.useState)(0),2),g=h[0],y=h[1],b=(0,n.createRef)();return(0,n.useEffect)((function(){d((0,i.default)(r)),u.default.registerLanguage(\"javascript\",c.default),e(\".markdown-body pre\").each((function(e,t){u.default.highlightBlock(t)})),a.default.spacingElementByClassName(\"markdown-body\"),g||y(b&&b.current?b.current.offsetHeight:0)}),[r]),n.default.createElement(\"div\",null,n.default.createElement(\"div\",{ref:b,style:!m&&l&&g>l?{maxHeight:\"\".concat(l,\"px\"),overflow:\"hidden\"}:null,className:\"markdown-body _1_Fpd\",dangerouslySetInnerHTML:{__html:s}}),function(){return m||!l||g<l?null:n.default.createElement(\"div\",{className:\"_2GBbo\"},n.default.createElement(\"span\",{className:\"btn btn-outline-primary btn-block btn-sm mt-3\",onClick:function(e){e.stopPropagation(),v(!m)}},!m&&l&&g>l?\"展开全部\":\"收起\"))}())};var n=function(e){if(e&&e.__esModule)return e;var t=o();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}}r.default=e,t&&t.set(e,r);return r}(r(0)),a=l(r(695));r(696);var i=l(r(790)),u=l(r(697)),c=l(r(698));function l(e){return e&&e.__esModule?e:{default:e}}function o(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}}).call(this,r(68))},790:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;function n(e){e=e||32;for(var t=\"ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678\",r=t.length,n=\"\",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*r));return n}t.default=function(e){return e?e=function(e){var t=e.match(/\\<img(.*?)>/g),r=function(e){var t=/src=[\\'\\\"]?([^\\'\\\"]*)[\\'\\\"]?/i,r=[],n=e.match(/\\<img(.*?)>/g);return n&&n.length>0&&n.map((function(e){var n=e.match(t);n&&n[1]&&r.push(n[1])})),r}(e);return r.map((function(e,t){r[t]=e.split(\"?\")[0]})),r=\"['\"+r.join(\"','\")+\"']\",t&&t.length>0&&t.map((function(t,n){var a=t;a=a.replace(/\\?/g,\"\\\\?\"),e=e.replace(new RegExp(a,\"gm\"),'<div onclick=\"webPictureViewer('+r+\",\"+n+');\">'+t+\"</div>\")})),e}(e=function(e){if(!e)return\"\";e=e.replace(\"&nbsp;\",\" \");var t=/(<a(.*?)>(.*?)<\\/a>|<img(.*?)>|<ifram(.*?)>)/gi,r=[],a=e.match(t);a&&a.length>0&&e.match(t).map((function(t){var a=\"#\"+n(18)+\"#\";r.push({id:a,value:t}),e=e.replace(t,a)}));var i=e.match(/(http:\\/\\/>http:\\/\\/|http:\\/\\/|https:\\/\\/|www\\.|magnet\\:\\?xt\\=)(.*?)(?=\\s|http|https|\\)|\\>|\\]|\\}|\\<|\\\"|\\'|$)/gi);if(i&&i.length>0){i=i.sort((function(e,t){return t.length-e.length}));var u=[];i.map((function(t){var r=\"#\"+n(18)+\"#\";u.push({id:r,value:t}),e=e.replace(t,r)})),u.map((function(t){var r=-1==t.value.indexOf(\"http\")?\"http:\"+t.value:t.value;e=e.replace(t.id,\"<a href=\".concat(r,' target=\"_blank\" rel=\"nofollow\">').concat(t.value,\"</a>\"))}))}return r.length>0&&r.map((function(t){e=e.replace(t.id,t.value)})),e}(e=function(e){var t=e.match(/(https:\\/\\/v\\.|http:\\/\\/v\\.|v\\.)qq\\.com\\/x\\/(page|cover)\\/(.*?)(?=\\s|http|https|\\)|\\>|\\]|\\}|\\<|$)/gi);return t&&0!=t.length?(t.map((function(t){var r;try{var n=t.split(\"?\")[0].split(\".\");n=n[n.length-2].split(\"/\"),r=t.split(\"?\")[0].split(\"/\").pop().split(\".\")[0]}catch(e){console.log(e)}if(r){var a=\"//v.qq.com/txp/iframe/player.html?vid=\".concat(r);e=e.replace(t,'<iframe frameborder=\"0\" src=\"'.concat(a,'\" allowFullScreen=\"true\"></iframe>'))}})),e):e}(e=function(e){var t=e.match(/(https:\\/\\/www\\.youtube\\.com|https:\\/\\/youtube\\.com|http:\\/\\/www.youtube\\.com|http:\\/\\/youtube\\.com|www\\.youtube\\.com|youtube\\.com)\\/watch\\?v\\=(.*?)(?=\\s|http|https|\\)|\\>|\\]|\\}|\\<|$)/gi);return t&&0!=t.length?(t.map((function(t){var r;try{t.split(\"?\")[1].split(\"&\").map((function(e){var t=e.split(\"=\");t&&\"v\"==t[0]&&(r=t[1])}))}catch(e){console.log(e)}if(r){var n=\"//www.youtube.com/embed/\".concat(r);e=e.replace(t,'<iframe width=\"100%\" style=\"background:#f9f9f9;\" src=\"'.concat(n,'\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>'))}})),e):e}(e=function(e){var t=e.match(/(https:\\/\\/www\\.acfun\\.cn|https:\\/\\/acfun\\.cn|http:\\/\\/www.acfun\\.cn|http:\\/\\/acfun\\.cn|www\\.acfun\\.cn|acfun\\.cn)\\/v\\/(.*?)(?=\\s|http|https|\\)|\\>|\\]|\\}|\\<|$)/gi);return t&&0!=t.length?(t.map((function(t){var r;try{r=(r=t.split(\"acfun.cn/v/\")[1].split(\"/\")[0]).split(\"?\")[0]}catch(e){console.log(e)}if(r){var n=\"https://www.acfun.cn/player/\".concat(r);e=e.replace(t,'<iframe src=\"'.concat(n,'\" id=\"ACFlashPlayer-re\"  scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\"></iframe>'))}})),e):e}(e=function(e){var t=e.match(/(https:\\/\\/www\\.bilibili\\.com|https:\\/\\/bilibili\\.com|http:\\/\\/www.bilibili\\.com|http:\\/\\/bilibili\\.com|www\\.bilibili\\.com|bilibili\\.com)\\/video\\/av(.*?)(?=\\s|http|https|\\)|\\>|\\]|\\}|\\<|$)/gi);return t&&0!=t.length?(t.map((function(t){var r;try{r=(r=t.split(\"bilibili.com/video/av\")[1].split(\"/\")[0]).split(\"?\")[0]}catch(e){console.log(e)}if(r){var n=\"//player.bilibili.com/player.html?aid=\".concat(r);e=e.replace(t,'<iframe src=\"'.concat(n,'\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\"></iframe>'))}})),e):e}(e=function(e){var t=e.match(/(http:\\/\\/v\\.youku\\.com|https:\\/\\/v\\.youku\\.com|v\\.youku\\.com)\\/v\\_show\\/id\\_(.*?)(?=\\s|http|https|\\)|\\>|\\]|\\}|\\<|$)/gi);return t&&0!=t.length?(t.map((function(t){var r;try{r=(r=t.split(\"v.youku.com/v_show/id_\")[1].split(\".\")[0]).split(\"?\")[0]}catch(e){console.log(e)}if(r){var n=\"//player.youku.com/embed/\".concat(r);e=e.replace(t,\"<iframe width='100%' src='\".concat(n,\"' frameborder=0 'allowfullscreen'></iframe>\"))}})),e):e}(e=function(e){var t=e.match(/(http:\\/\\/music\\.163\\.com|https:\\/\\/music\\.163\\.com|music\\.163\\.com)\\/(.*?)(?=\\s|http|https|\\)|\\>|\\]|\\}|\\<|$)/gi);return t&&t.length>0&&t.map((function(t){var r,n=-1;-1!=t.indexOf(\"/song?\")?n=2:-1!=t.indexOf(\"/playlist?\")?n=0:-1!=t.indexOf(\"/album?\")?n=1:-1!=t.indexOf(\"/dj?\")?n=3:-1!=t.indexOf(\"/radio/?\")&&(n=4);try{t.split(\"?\")[1].split(\"&\").map((function(e){var t=e.split(\"=\");\"id\"==t[0]&&(r=t[1])}))}catch(e){console.log(e)}if(-1!=n&&r)if(2==n){var a=\"//music.163.com/outchain/player?type=2&id=\".concat(r,\"&auto=0&height=66\");e=e.replace(t,'<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"'.concat(a,'\"></iframe>'))}else if(3==n){var i=\"//music.163.com/outchain/player?type=3&id=\".concat(r,\"&auto=1&height=66\");e=e.replace(t,'<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"'.concat(i,'\"></iframe>'))}else if(4==n){var u=\"//music.163.com/outchain/player?type=4&id=\".concat(r,\"&auto=1&height=430\");e=e.replace(t,'<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=450 src=\"'.concat(u,'\"></iframe>'))}else{var c=\"//music.163.com/outchain/player?type=\".concat(n,\"&id=\").concat(r,\"&height=430\");e=e.replace(t,'<iframe type=\"music\" src=\"'.concat(c,'\" height=\"430\"></iframe>'))}})),e}(e=function(e){var t=e.match(/\\<pre>(.*?)<\\/pre>/g),r=[];t&&t.length>0&&t.map((function(t){var a=\"#\"+n(18)+\"#\";r.push({id:a,value:t}),e=e.replace(t,a)}));var a=(e=e.replace(/([\\r\\n])/g,\"\")).split(\"<p><br></p>\");return a=function(e){for(var t=[],r=0;r<e.length;r++)-1==t.indexOf(e[r])&&t.push(e[r]);return t.length>0&&!t[0]&&t.splice(0,1),t.length>0&&!t[t.length-1]&&t.splice(t.length-1,1),t}(a),e=a.join(\"<p><br></p>\"),r.length>0&&r.map((function(t){e=e.replace(t.id,t.value)})),e}(e))))))))):\"\"}},863:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=e.id,r=(0,a.useStore)(),o=(0,a.useSelector)((function(e){return(0,u.getMessageListById)(e,t)}));return n.default.createElement(l.default,f({},e,o,{load:function(e){return(0,i.loadMessageList)(e)(r.dispatch,r.getState)},renderItem:function(e){return n.default.createElement(\"div\",{key:e._id},e._create_at?n.default.createElement(\"div\",{className:\"text-center text-secondary\"},e._create_at):null,n.default.createElement(c.default,{message:e}))},renderHead:function(e){var t=e.loadData;return o&&o.more?n.default.createElement(\"div\",{className:\"text-center pt-2 pb-2\"},n.default.createElement(\"span\",{className:\"a\",onClick:function(){t()}},\"加载更多\")):null}}))};var n=o(r(0)),a=r(168),i=r(291),u=r(298),c=o(r(864)),l=o(r(784));function o(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}},864:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var n=l(r(280)),a=l(r(0)),i=r(168),u=r(78),c=l(r(787));function l(e){return e&&e.__esModule?e:{default:e}}r(755);var o={\"./styles/index.scss\":{item:\"_2IEru\",avatar:\"_3SvuR\",nickname:\"_2mleo\",action:\"_2DaVG\",content:\"_3pSNK\",right:\"_3e8cl\"}};t.default=function(e){var t=e.message,r=(0,i.useSelector)(u.getUserInfo);return a.default.createElement(\"div\",{className:(0,n.default)(\"item \".concat(r&&r._id==t.user_id._id?\"right\":\"\"),o)},a.default.createElement(\"div\",null,a.default.createElement(\"div\",{className:\"_3SvuR\"},a.default.createElement(\"img\",{src:t.user_id.avatar_url})),a.default.createElement(\"div\",{className:\"_3pSNK\"},a.default.createElement(c.default,{content:t.content_html}))))}},865:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=e.addressee_id,r=e.placeholder,o=void 0===r?\"请输入...\":r,f=e.successCallback,s=void 0===f?function(){}:f,m=e.getEditor,v=void 0===m?function(e){}:m,h=p((0,n.useState)(\"\"),2),g=h[0],y=h[1],b=p((0,n.useState)(\"\"),2),w=b[0],_=b[1],O=p((0,n.useState)(n.default.createElement(\"div\",null)),2),E=O[0],j=O[1],k=p((0,n.useState)(null),2),S=k[0],P=k[1],M=p((0,n.useState)(!1),2),N=M[0],x=M[1],D=p((0,n.useState)(!1),2),T=D[0],C=D[1],A=(0,i.useStore)(),I=function(){var e=d(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=2;break}return e.abrupt(\"return\");case 2:if(g){e.next=4;break}return e.abrupt(\"return\",S.focus());case 4:if(-1==w.indexOf('<img src=\"\">')){e.next=7;break}return Toastify({text:\"有图片上传中，请等待上传完成后再提交\",duration:3e3,backgroundColor:\"linear-gradient(to right, #0988fe, #1c75fb)\"}).showToast(),e.abrupt(\"return\");case 7:return C(!0),e.next=10,o={addressee_id:t,type:1,content:g,content_html:w,device:c.default.getCurrentDeviceId()},(0,u.addMessage)(o)(A.dispatch,A.getState);case 10:r=e.sent,a=p(r,2),i=a[0],a[1],C(!1),i?i&&Toastify({text:i.message,duration:3e3,backgroundColor:\"linear-gradient(to right, #ff6c6c, #f66262)\"}).showToast():(j(n.default.createElement(\"div\",{key:(new Date).getTime()},n.default.createElement(l.default,{syncContent:R,content:\"\",getEditor:function(e){P(e),v(e)},displayControls:!0}))),R(\"\",\"\"),s());case 16:case\"end\":return e.stop()}var o}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=d(regeneratorRuntime.mark((function e(r,n){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(r),_(n),!N&&r&&x(!0),e.next=5,a.default.load({key:\"comments-draft\"});case 5:(i=e.sent)[t]=r,a.default.save({key:\"comments-draft\",data:i});case 8:case\"end\":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),W=function(){var e=d(regeneratorRuntime.mark((function e(){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,a.default.load({key:\"comments-draft\"});case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:r=e.t0,e.next=14;break;case 10:e.prev=10,e.t1=e.catch(1),r={},console.log(e.t1);case 14:i={content:r[t]||\"\",syncContent:R,getEditor:function(e){P(e),v(e)},displayControls:!0,placeholder:o},j(n.default.createElement(l.default,i));case 16:case\"end\":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){W()}),[]),n.default.createElement(\"div\",{className:\"_3tHDN\"},n.default.createElement(\"div\",{className:\"_37ts_\"},E),N?n.default.createElement(\"div\",{className:\"V5D1N\"},n.default.createElement(\"button\",{onClick:I,type:\"button\",className:\"btn btn-primary rounded-pill btn-sm pl-3 pr-3\"},T?\"提交中...\":\"提交\")):null)};var n=function(e){if(e&&e.__esModule)return e;var t=f();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}}r.default=e,t&&t.set(e,r);return r}(r(0)),a=o(r(172)),i=r(168),u=r(291),c=o(r(785)),l=o(r(802));function o(e){return e&&e.__esModule?e:{default:e}}function f(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function s(e,t,r,n,a,i,u){try{var c=e[i](u),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function u(e){s(i,n,a,u,c,\"next\",e)}function c(e){s(i,n,a,u,c,\"throw\",e)}u(void 0)}))}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}r(756)}}]);","extractedComments":[]}