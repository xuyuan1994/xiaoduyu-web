{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{764:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var n=c(r(0)),a=c(r(779)),u=c(r(780)),o=c(r(871)),i=c(r(782));function c(e){return e&&e.__esModule?e:{default:e}}var l=(0,a.default)((function(){return n.default.createElement(i.default,null,n.default.createElement(u.default,{title:\"忘记密码\"}),n.default.createElement(o.default,null))}));t.default=l},779:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=function(t){t.history;var r=t.location,l=t.match;t.staticContext;\"undefined\"!=typeof window&&u.set(\"history\",(0,a.default)().history);var f,s,d=(0,n.useState)(\"\"),p=(s=2,function(e){if(Array.isArray(e))return e}(f=d)||function(e,t){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)){var r=[],n=!0,a=!1,u=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,u=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw u}}return r}}(f,s)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()),v=p[0],m=p[1],y=(0,o.useStore)(),h=r.pathname,g=r.search;return r.params=g?(0,c.default)(g):{},(0,n.useEffect)((function(){return\"undefined\"!=typeof window&&\"/\"!=window.location.pathname&&(0,i.setScrollPosition)(h+g)(y.dispatch,y.getState),function(){\"undefined\"!=typeof window&&u.remove(\"history\")}}),[]),v?n.default.createElement(\"div\",{className:\"container text-center\"},v):n.default.createElement(e,{match:l,setNotFound:m})};return t.loadDataOnServer=e.loadDataOnServer||function(){return{code:200}},t};var n=s(r(0)),a=l(r(277)),u=s(r(116)),o=r(168),i=r(278),c=l(r(781));function l(e){return e&&e.__esModule?e:{default:e}}function f(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function s(e){if(e&&e.__esModule)return e;var t=f();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=n?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}}return r.default=e,t&&t.set(e,r),r}},780:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=e.title,r=e.children,n=(0,o.useSelector)((function(e){return(0,i.getUnreadNotice)(e)})),f=(0,o.useSelector)((function(e){return(0,c.getTipsById)(e,\"home\")||(0,c.getTipsById)(e,\"feed\")||(0,c.getTipsById)(e,\"favorite\")||(0,c.getTipsById)(e,\"excellent\")})),s=(0,o.useSelector)((function(e){return(0,c.getTipsById)(e,\"unread-message\")})),d=\"\";s&&(d+=\"(\".concat(s,\"条私信) \"));n&&n.length>0&&(d+=\"(\".concat(n.length,\"条通知) \"));f&&(d+=\"(有新动态) \");d+=t||l.name,t&&(d+=\" - \".concat(l.name));return a.default.createElement(a.default.Fragment,null,a.default.createElement(u.ReactTitle,{title:d}),r?a.default.createElement(u.default,null,r):null)};var n,a=(n=r(0))&&n.__esModule?n:{default:n},u=function(e){if(e&&e.__esModule)return e;var t=f();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=n?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}}r.default=e,t&&t.set(e,r);return r}(r(691)),o=r(168),i=r(169),c=r(170),l=r(77);function f(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}},781:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var n=function(e){return e.substr(1).split(\"&\").reduce((function(e,t){if(t){var r=t.split(\"=\");e[r[0]]=r[1]||\"\"}return e}),{})};t.default=n},782:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=e.children;return a.default.createElement(\"div\",{className:\"container\"},a.default.createElement(\"div\",{className:\"_3RUsQ\"},t))};var n,a=(n=r(0))&&n.__esModule?n:{default:n};r(692)},791:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=e.onClick,r=(p=(0,n.useState)(0),v=2,function(e){if(Array.isArray(e))return e}(p)||function(e,t){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)){var r=[],n=!0,a=!1,u=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,u=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw u}}return r}}(p,v)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()),o=r[0],i=r[1],l=(0,a.useStore)(),f=function(e){return(0,u.addCaptcha)(e)(l.dispatch,l.getState)},s=!1,d=function(){var e=61;!function t(){if(0==e)return null;i(--e),setTimeout((function(){t()}),1e3)}()};var p,v;return n.default.createElement(\"span\",{className:\"a text-primary _27EiP\",onClick:function(){t((function(e,t){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(s||o>0)return null;s=!0,f(e).then(c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(!0),s=!1,d();case 3:case\"end\":return e.stop()}}),e)})))).catch(function(){var e=c(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(!1),Toastify&&(Toastify({text:r.message,duration:3e3,backgroundColor:\"linear-gradient(to right, #ff6c6c, #f66262)\"}).showToast(),s=!1);case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}(e,t)}))}},o>0?\"发送成功 (\".concat(o,\")\"):\"获取验证码\")};var n=function(e){if(e&&e.__esModule)return e;var t=o();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=n?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(168),u=r(798);function o(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e,t,r,n,a,u,o){try{var i=e[u](o),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var u=e.apply(t,r);function o(e){i(u,n,a,o,c,\"next\",e)}function c(e){i(u,n,a,o,c,\"throw\",e)}o(void 0)}))}}r(700)},798:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getCaptcha=t.addCaptcha=void 0;var n,a=(n=r(48))&&n.__esModule?n:{default:n};function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,u=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,u=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw u}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function o(e,t,r,n,a,u,o){try{var i=e[u](o),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var u=e.apply(t,r);function i(e){o(u,n,a,i,c,\"next\",e)}function c(e){o(u,n,a,i,c,\"throw\",e)}i(void 0)}))}}t.addCaptcha=function(e){var t=e.id,r=void 0===t?(new Date).getTime():t,n=e.args,o=e.fields,c=void 0===o?\"success\":o;return function(e,t){return new Promise(function(){var o=i(regeneratorRuntime.mark((function o(i,l){var f,s,d,p,v;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return f=t().user.accessToken||\"\",o.next=3,(0,a.default)({type:\"mutation\",apis:[{api:\"addCaptcha\",args:n,fields:c}],headers:f?{accessToken:f}:{}});case 3:s=o.sent,d=u(s,2),p=d[0],(v=d[1])?(v._id&&v.url&&e({type:\"ADD_CAPTCHA_ID\",id:r,data:v}),i(v)):l(p);case 8:case\"end\":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}())}};t.getCaptcha=function(e){return function(t,r){return new Promise(function(){var t=i(regeneratorRuntime.mark((function t(r,n){var o,i,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,a.default)({apis:[{api:\"getCaptcha\",args:e,fields:\"captcha\"}]});case 2:o=t.sent,i=u(o,2),c=i[0],l=i[1],c?n(c):r(l);case 7:case\"end\":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())}}},871:function(e,t,r){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(){var t=(0,a.default)(),r=t.history,c=(t.location,t.match,(0,n.createRef)()),l=(0,n.createRef)(),s=(0,n.createRef)(),d=(0,n.createRef)(),p=(0,u.useStore)(),v=function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var a,u,i,f,v,m,y,h,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=c.current,u=l.current,i=s.current,f=d.current,a.value){t.next=7;break}return t.abrupt(\"return\",a.focus());case 7:if(u.value){t.next=9;break}return t.abrupt(\"return\",u.focus());case 9:if(i.value){t.next=11;break}return t.abrupt(\"return\",i.focus());case 11:if(f.value){t.next=13;break}return t.abrupt(\"return\",f.focus());case 13:if(i.value==f.value){t.next=15;break}return t.abrupt(\"return\",alert(\"两次密码输入不一致\"));case 15:return v={captcha:u.value,new_password:i.value},-1!=a.value.indexOf(\"@\")?v.email=a.value:v.phone=a.value,t.next=19,O={args:v},(0,o.forgot)(O)(p.dispatch,p.getState);case 19:return m=t.sent,w=2,y=function(e){if(Array.isArray(e))return e}(b=m)||function(e,t){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)){var r=[],n=!0,a=!1,u=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,u=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw u}}return r}}(b,w)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}(),h=y[0],g=y[1],h?Toastify({text:h.message,duration:3e3,backgroundColor:\"linear-gradient(to right, #ff6c6c, #f66262)\"}).showToast():g&&g.success&&(Toastify({text:\"修改成功，请登陆\",duration:7e3,backgroundColor:\"linear-gradient(to right, #50c64a, #40aa33)\"}).showToast(),r.push(\"/\"),setTimeout((function(){e(\"#sign\").modal({show:!0},{\"data-type\":\"sign-in\"})}),500)),t.abrupt(\"return\",!1);case 25:case\"end\":return t.stop()}var b,w,O}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var u=t.apply(e,r);function o(e){f(u,n,a,o,i,\"next\",e)}function i(e){f(u,n,a,o,i,\"throw\",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return n.default.createElement(\"div\",{className:\"card\"},n.default.createElement(\"div\",{className:\"card-header\"},n.default.createElement(\"div\",{className:\"card-title\"},\"重置密码\")),n.default.createElement(\"form\",{onSubmit:v},n.default.createElement(\"div\",{className:\"card-body\"},n.default.createElement(\"div\",{className:\"form-group\"},n.default.createElement(\"label\",{className:\"text-secondary\"},\"忘记密码了？填写如下表单，重置你账号的密码。\"),n.default.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"你的账号的手机号或邮箱\",ref:c})),n.default.createElement(\"div\",{className:\"form-group\"},n.default.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"验证码\",ref:l}),n.default.createElement(i.default,{onClick:function(e){var t=c.current;if(!t.value)return t.focus();var r={type:\"forgot\"};-1!=t.value.indexOf(\"@\")?r.email=t.value:r.phone=t.value,e({args:r})}})),n.default.createElement(\"div\",{className:\"form-group\"},n.default.createElement(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"新密码\",ref:s})),n.default.createElement(\"div\",{className:\"form-group\"},n.default.createElement(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"重复新密码\",ref:d}))),n.default.createElement(\"div\",{className:\"card-footer text-right\"},n.default.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"提交\"))))};var n=function(e){if(e&&e.__esModule)return e;var t=l();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=n?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}}r.default=e,t&&t.set(e,r);return r}(r(0)),a=c(r(277)),u=r(168),o=r(872),i=c(r(791));function c(e){return e&&e.__esModule?e:{default:e}}function l(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function f(e,t,r,n,a,u,o){try{var i=e[u](o),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}}).call(this,r(68))},872:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.forgot=void 0;var n,a=(n=r(48))&&n.__esModule?n:{default:n};function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,a=!1,u=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,u=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw u}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function o(e,t,r,n,a,u,o){try{var i=e[u](o),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}t.forgot=function(e){var t=e.args;return function(e,r){return new Promise(function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var n,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.default)({type:\"mutation\",apis:[{api:\"forgot\",args:t,fields:\"success\"}]});case 2:n=e.sent,o=u(n,2),i=o[0],c=o[1],r([i,c]);case 7:case\"end\":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var u=e.apply(t,r);function i(e){o(u,n,a,i,c,\"next\",e)}function c(e){o(u,n,a,i,c,\"throw\",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}())}}}}]);","extractedComments":[]}