{"code":"!function(e){function t(t){for(var a,o,s=t[0],u=t[1],c=t[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);for(l&&l(t);f.length;)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={8:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var i,s=document.createElement(\"script\");s.charset=\"utf-8\",s.timeout=120,o.nc&&s.setAttribute(\"nonce\",o.nc),s.src=function(e){return o.p+\"\"+({}[e]||e)+\".d9233c65a3a3e76ce58d.js\"}(e);var u=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var a=t&&(\"load\"===t.type?\"missing\":t.type),i=t&&t.target&&t.target.src;u.message=\"Loading chunk \"+e+\" failed.\\n(\"+a+\": \"+i+\")\",u.name=\"ChunkLoadError\",u.type=a,u.request=i,n[1](u)}r[e]=void 0}};var c=setTimeout((function(){i({type:\"timeout\",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"//ddfantasies.com:4000/\",o.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;i.push([303,0,1]),n()}({116:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.set=function(e,t){a[e]=t},t.get=function(e){return a[e]},t.remove=function(e){delete a[e]};var a={}},117:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){return function(t){return function(n,a){var r=JSON.parse(JSON.stringify(e));return r.processList=e.processList,t.id&&(r.id=t.id),t.args&&(r.args=t.args),t.fields&&(r.fields=t.fields),t.restart&&(r.restart=t.restart),s(n,a)(r)}}};var a,r=(a=n(48))&&a.__esModule?a:{default:a};function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function o(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}var s=function(e,t){return function(n){var a=n.id,s=n.reducerName,u=n.actionType,c=n.processList,l=void 0===c?function(e){return e}:c,d=n.api,f=n.args,p=n.fields,m=n.restart,v=void 0!==m&&m,h=n.unshift,y=void 0!==h&&h;return new Promise(function(){var n,c=(n=regeneratorRuntime.mark((function n(o,c){var m,h,g,_,b,w,k,I,x,T,S,E,O;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(m=t(),h=m[s][a]||{},g=m.user.accessToken||\"\",v&&(h={}),!h.loading){n.next=4;break}return n.abrupt(\"return\",o([\"loading...\"]));case 4:if(void 0===h.more||h.more){n.next=6;break}return n.abrupt(\"return\",o([null,h]));case 6:if(h.data||(h.data=[]),void 0===h.filters?(void 0===f.page_number&&(f.page_number=1),void 0===f.page_size&&(f.page_size=25),f.page_number=parseInt(f.page_number),f.page_size=parseInt(f.page_size),h.filters=f):(f=h.filters).page_number+=1,h.loading=!0,u&&e({type:u,name:a,data:h}),_=[{aliases:\"list\",api:d,args:f,fields:p}],b=[],f._id){n.next=23;break}return Reflect.has(h,\"count\")||(delete(I=Object.assign({},f)).page_size,delete I.page_number,delete I.sort_by,_.push({aliases:\"count\",api:\"count\"+d.charAt(0).toUpperCase()+d.slice(1),args:I,fields:\"count\"})),n.next=16,(0,r.default)({apis:_,headers:{accessToken:g}});case 16:x=n.sent,T=i(x,2),w=T[0],(k=T[1])&&k.count?(h.count=k.count.count,b=k.list):b=k,n.next=31;break;case 23:return n.next=25,(0,r.default)({apis:_,headers:{accessToken:g}});case 25:S=n.sent,E=i(S,2),w=E[0],k=E[1],h.count=1,b=k;case 31:if(!w){n.next=35;break}return h.loading=!1,o([null,h]),n.abrupt(\"return\");case 35:b=JSON.parse(JSON.stringify(b)),O=l(b,{dispatch:e,getState:t},a),h.data=y?O.concat(h.data):h.data.concat(O),h.filters=f,h.loading=!1,h.more=!(h.filters.page_size*h.filters.page_number>h.count),u&&e({type:u,name:a,data:h}),o([null,h]);case 43:case\"end\":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(a,r){var i=n.apply(e,t);function s(e){o(i,a,r,s,u,\"next\",e)}function u(e){o(i,a,r,s,u,\"throw\",e)}s(void 0)}))});return function(e,t){return c.apply(this,arguments)}}())}}},118:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){if(!e||!Promise.prototype.isPrototypeOf(e))return new Promise((function(e,t){t(new Error(\"requires promises as the param\"))})).catch((function(e){return[e,null]}));return e.then((function(e){return[null,e]})).catch((function(e){return[e]}))}},119:function(e,t,n){\"use strict\";var a={debug:!1,logs:!0,apiLog:!1,reduxLog:!1,tokenMaxAge:2592e6,cache:18e4,memoryUsage:!1,posts:{contentMaxHeight:1024},comment:{contentMaxHeight:450}};n(77).debug&&(a.cache=0,a.reduxLog=!0),e.exports=a},12:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){return JSON.parse(JSON.stringify(e))}},169:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getOperatingStatus=t.getTab=t.getTopicTab=t.getUnreadNotice=t.getOnlineUserCount=t.getOnline=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={online:{connect:0,member:0,visitor:0},data:{users:0,posts:0,comments:0,replys:0},onlineUserCount:0,unreadNotice:[],tab:\"home\",topicTab:\"\",notificationPermission:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_ONLINE_STATUS\":e.online=t.online;break;case\"SET_UNREAD_NOTICE\":e.unreadNotice=t.unreadNotice;break;case\"SET_TOPIC_TAB\":e.topicTab=t.topicTab;break;case\"SET_TAB\":t.tab&&(e.tab=t.tab);break;case\"SET_NOTIFICATION_PERMISSION\":t.status&&(e.notificationPermission=t.status);break;case\"SET_OPERATING_STATUS\":t.data&&(e.data.posts=t.data.countPosts.count,e.data.users=t.data.countUsers.count,e.data.comments=t.data.countComments.count,e.data.replys=t.data.countReply.count);break;default:return e}return(0,r.default)(e)};t.getOnline=function(e){return e.website.online};t.getOnlineUserCount=function(e){return e.website.onlineUserCount};t.getUnreadNotice=function(e){return e.website.unreadNotice};t.getTopicTab=function(e){return e.website.topicTab};t.getTab=function(e){return e.website.tab};t.getOperatingStatus=function(e){return e.website.data}},170:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getTipsById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_TIPS_BY_ID\":t.id&&(e[t.id]=t.status);break;default:return e}return(0,r.default)(e)};t.getTipsById=function(e,t){return e.tips[t]||!1}},171:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.dateDiff=t.getDateArray=t.getCountdown=void 0;t.getCountdown=function(e,t){var n=Math.ceil(new Date(t).getTime()/1e3)-Math.ceil(new Date(e).getTime()/1e3),a=Math.floor(n/86400),r=Math.floor((n-86400*a)/3600),i=Math.floor((n-86400*a-3600*r)/60);return{days:a,hours:r,mintues:i,seconds:n-86400*a-3600*r-60*i}};var a=function(e,t){return new Array(Math.max(t-String(e).length+1,0)).join(\"0\")+e},r=function(e){var t=e?new Date(e):new Date;return[t.getFullYear(),a(t.getMonth()+1,2),a(t.getDate(),2),a(t.getHours(),2),a(t.getMinutes(),2),a(t.getSeconds(),2),a(t.getMilliseconds(),2)]};t.getDateArray=r;t.dateDiff=function(e,t){t||(t=(new Date).getTime());var n=Math.ceil(new Date(e).getTime()/1e3),a=Math.ceil(new Date(t).getTime()/1e3)-n,i=e;switch(!0){case a<=1:i=\"刚刚\";break;case a<=60:i=a+\"秒前\";break;case a<=3600:i=Math.floor(a/60)+\"分钟前\";break;default:var o=r(e),s=r((new Date).getTime());i=o[0]==s[0]&&o[1]==s[1]&&s[2]==o[2]?\"今天 \"+o[3]+\":\"+o[4]:o[0]==s[0]&&o[1]==s[1]&&parseInt(s[2])-parseInt(o[2])==1?\"昨天 \"+o[3]+\":\"+o[4]:o[0]==s[0]&&o[1]==s[1]&&parseInt(s[2])-parseInt(o[2])==2?\"前天 \"+o[3]+\":\"+o[4]:o[0]==s[0]?Math.floor(o[1])+\"月\"+Math.floor(o[2])+\"日\":o[0]+\"年\"+o[1]+\"月\"+o[2]+\"日\"}return i}},172:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(556));var r=null;\"undefined\"!=typeof window&&(r=new a.default({size:1e3,storageBackend:window.localStorage,defaultExpires:null,enableCache:!0}));var i={save:function(e){return new Promise((function(t){r.save(e).then((function(e){t(e)})).catch((function(e){t()}))}))},load:function(e){return new Promise((function(t){r.load(e).then((function(e){t(e)})).catch((function(e){t()}))}))},remove:function(e){r.remove(e)}};t.default=i},173:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getTopicListById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};function i(e){return(i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var o={};t.default=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(o),a=arguments.length>1?arguments[1]:void 0,s=function(){switch(a.type){case\"SET_TOPICS\":n=a.state;break;case\"SET_TOPIC_LIST_BY_ID\":e=a.name,t=a.data,e&&t&&(n[e]=t);break;case\"UPDATE_TOPIC\":for(var r in n)n[r].data.map((function(e){if(e._id==a.id)for(var t in a.update)e[t]=a.update[t]}));break;case\"UPDATE_TOPIC_FOLLOW\":var i=a.id,o=a.followStatus,s=function(e){for(var t=n[e],a=function(a,r){t[a]._id==i&&(n[e].data[a].follow_count+=o?1:-1,n[e].data[a].follow=o),t[a].children&&t[a].children.length>0&&t[a].children.map((function(t,r){t._id==i&&(n[e].data[a].children[r].follow_count+=o?1:-1,n[e].data[a].children[r].follow=o)}))},r=0,s=(t=t.data).length;r<s;r++)a(r)};for(var u in n)s(u);break;default:return{v:n}}}();return\"object\"===i(s)?s.v:(0,r.default)(n)};t.getTopicListById=function(e,t){return e.topic[t]}},174:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getPostsListById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_POSTS\":e=t.state;break;case\"SET_POSTS_LIST_BY_ID\":var n=t.name,a=t.data;n&&a&&(e[n]=a);break;case\"REMOVE_POSTS_LIST_BY_ID\":t.id&&e[t.id]&&delete e[t.id];break;case\"UPDATE_POSTS_FOLLOW\":for(var o in e){var s=e[o].data;if(s.length>0)for(var u=0,c=s.length;u<c;u++)s[u]._id==t.id&&(e[o].data[u].follow_count+=t.followStatus?1:-1,e[o].data[u].follow=t.followStatus)}break;case\"UPDATE_POSTS_AUHTOR_FOLLOW\":for(var l in e){var d=e[l].data;if(d.length>0)for(var f=0,p=d.length;f<p;f++)d[f].user_id&&d[f].user_id._id==t.peopleId&&(e[l].data[f].user_id.follow=t.followStatus)}break;case\"UPDATE_POSTS_LIKE_STATUS\":var m=t.id,v=t.status;for(var h in e){var y=e[h].data;y.map((function(e){e._id==m&&(e.like_count+=v?1:-1,e.like=v)}))}break;case\"UPDATE_POSTS_VIEW\":m=t.id;for(var g in e)e[g].data.map((function(e){e._id==m&&(e.view_count+=1)}));break;case\"UPDATE_POST\":m=t.id;var _=t.update;for(var b in e)e[b].data.map((function(e){if(e._id==m)for(var t in _)e[t]=_[t]}));break;case\"REMOVE_POSTS_BY_ID\":m=t.id;for(var w in e)if(w==m)delete e[w];else{var k=e[w].data;if(k.length>0)for(var I=0,x=k.length;I<x;I++)if(k[I]._id==m){k.splice(I,1);break}}break;default:return e}return(0,r.default)(e)};t.getPostsListById=function(e,t){return e.posts[t]}},175:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getSessionListById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_SESSION\":e=t.state;break;case\"UPDATE_READ_BY_ID\":for(var n in e)e[n].data.map((function(e){e._id==t.id&&(e.unread_count=0)}));break;case\"SET_SESSION_LIST_BY_ID\":var a=t.name,o=t.data;a&&o&&(e[a]=o);break;case\"UPDATE_SESSION\":var s=t.id,u=t.update;for(var c in e)e[c].data.map((function(e){if(e._id==s)for(var t in u)e[t]=u[t]}));break;default:return e}return(0,r.default)(e)};t.getSessionListById=function(e,t){return e.session[t]}},176:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.loadTips=function(e){return function(){var t,n=(t=regeneratorRuntime.mark((function t(n,a){var o,s,u,c,l,d,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a().user,s=o.userInfo,u=[],e&&\"discover\"!=e||u.push({aliases:\"home\",api:\"posts\",args:{sort_by:\"sort_by_date\",deleted:!1,weaken:!1,page_size:1},fields:\"sort_by_date\"}),s&&(e&&\"notification\"!=e||u.push({aliases:\"userNotification\",api:\"fetchUnreadUserNotification\",args:{},fields:\"ids\"}),e||u.push({aliases:\"favorite\",api:\"posts\",args:{method:\"favorite\",sort_by:\"last_comment_at:-1\",deleted:!1,weaken:!1,page_size:1},fields:\"last_comment_at\"}),e&&\"new-feed\"!=e||u.push({aliases:\"feed\",api:\"feed\",args:{preference:!0,sort_by:\"create_at:-1\",page_size:1},fields:\"create_at\"}),e&&\"new-session\"!=e||u.push({aliases:\"sessions\",api:\"getUnreadSessions\",args:{},fields:\"count\"})),t.next=7,(0,r.default)({headers:{accessToken:o.accessToken},apis:u,multiple:!0});case 7:c=t.sent,v=2,(l=function(e){if(Array.isArray(e))return e}(m=c)||function(e,t){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}}(m,v)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}())[0],(d=l[1])&&(d.userNotification&&d.userNotification.ids.length>0&&n({type:\"SET_UNREAD_NOTICE\",unreadNotice:d.userNotification.ids}),d.home&&(f=(0,i.getPostsListById)(a(),\"home\"),(p=f&&f.data&&f.data[0]?f.data[0]:null)&&d.home[0]&&p.sort_by_date&&new Date(p.sort_by_date).getTime()<new Date(d.home[0].sort_by_date).getTime()?n({type:\"SET_TIPS_BY_ID\",id:\"home\",status:!0}):n({type:\"SET_TIPS_BY_ID\",id:\"home\",status:!1})),d.feed&&(d.feed[0]&&s.last_find_feed_at&&new Date(s.last_find_feed_at).getTime()<new Date(d.feed[0].create_at).getTime()?n({type:\"SET_TIPS_BY_ID\",id:\"feed\",status:!0}):n({type:\"SET_TIPS_BY_ID\",id:\"feed\",status:!1})),d.favorite&&(d.favorite[0]&&s.last_find_favorite_at&&new Date(s.last_find_favorite_at).getTime()<new Date(d.favorite[0].last_comment_at).getTime()?n({type:\"SET_TIPS_BY_ID\",id:\"favorite\",status:!0}):n({type:\"SET_TIPS_BY_ID\",id:\"favorite\",status:!1})),d.sessions&&(d.sessions.count?n({type:\"SET_TIPS_BY_ID\",id:\"unread-message\",status:d.sessions.count}):n({type:\"SET_TIPS_BY_ID\",id:\"unread-message\",status:0})));case 12:case\"end\":return t.stop()}var m,v}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(e){o(i,a,r,s,u,\"next\",e)}function u(e){o(i,a,r,s,u,\"throw\",e)}s(void 0)}))});return function(e,t){return n.apply(this,arguments)}}()};var a,r=(a=n(48))&&a.__esModule?a:{default:a},i=n(174);function o(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}},177:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.removeUnlockToken=t.initUnlockToken=t.getUnlockToken=void 0;var a=o(n(172)),r=o(n(118)),i=o(n(48));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function u(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){u(i,a,r,o,s,\"next\",e)}function s(e){u(i,a,r,o,s,\"throw\",e)}o(void 0)}))}}t.getUnlockToken=function(e){var t=e.args;return function(e,n){return new Promise(function(){var r=c(regeneratorRuntime.mark((function r(o){var u,c,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,i.default)({apis:[{api:\"getUnlockToken\",args:t,fields:\"unlock_token\"}],headers:{accessToken:n().user.accessToken}});case 2:u=r.sent,c=s(u,2),l=c[0],d=c[1],o([l,d]),d&&d.unlock_token&&(a.default.save({key:\"unlock-token\",data:d.unlock_token,expires:36e5}),e({type:\"ADD_UNLOCK_TOKEN\",unlockToken:d.unlock_token}));case 8:case\"end\":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}};t.initUnlockToken=function(){return function(){var e=c(regeneratorRuntime.mark((function e(t,n){var i,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.default)(a.default.load({key:\"unlock-token\"}));case 2:i=e.sent,o=s(i,2),o[0],(u=o[1])&&t({type:\"ADD_UNLOCK_TOKEN\",unlockToken:u});case 7:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};t.removeUnlockToken=function(){return function(){var e=c(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.default.remove({key:\"unlock-token\"});case 1:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},278:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.setScrollPosition=function(e){return function(t,n){t({type:\"SET_SCROLL_POSITION\",name:e})}},t.saveScrollPosition=function(e){return function(t,n){t({type:\"SAVE_SCROLL_POSITION\",name:e})}}},279:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.addAccessToken=function(e){var t=e.accessToken;return function(e,n){e({type:\"ADD_ACCESS_TOKEN\",access_token:t})}},t.removeAccessToken=function(){return function(e,t){e({type:\"REMOVE_ACCESS_TOKEN\"})}},t.updateUser=function(e){return function(){var t=s(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",new Promise(function(){var t=s(regeneratorRuntime.mark((function t(n){var o,s,u,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e._id=a().user.userInfo._id,t.next=3,(0,r.default)({type:\"mutation\",apis:[{api:\"updateUser\",args:e,fields:\"success\"}],headers:{accessToken:a().user.accessToken}});case 3:o=t.sent,s=i(o,2),u=s[0],c=s[1],n([u,c]);case 8:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case\"end\":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},t.updatePassword=function(e){return function(){var t=s(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",new Promise(function(){var t=s(regeneratorRuntime.mark((function t(n){var o,s,u,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.user_id=a().user.userInfo._id,t.next=3,(0,r.default)({type:\"mutation\",apis:[{api:\"updatePassword\",args:e,fields:\"success\"}],headers:{accessToken:a().user.accessToken}});case 3:o=t.sent,s=i(o,2),u=s[0],c=s[1],n([u,c]);case 8:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case\"end\":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},t.loadUserInfo=void 0;var a,r=(a=n(48))&&a.__esModule?a:{default:a};function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function o(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){o(i,a,r,s,u,\"next\",e)}function u(e){o(i,a,r,s,u,\"throw\",e)}s(void 0)}))}}t.loadUserInfo=function(e){var t=e.accessToken;return function(e,n){return new Promise(function(){var a=s(regeneratorRuntime.mark((function a(o,s){var u,c,l,d;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,r.default)({apis:[{api:\"selfInfo\",args:{},fields:\"\\n          _id\\n          nickname_reset_at\\n          create_at\\n          last_sign_at\\n          blocked\\n          role\\n          avatar\\n          brief\\n          source\\n          posts_count\\n          comment_count\\n          fans_count\\n          like_count\\n          follow_people_count\\n          follow_topic_count\\n          follow_posts_count\\n          block_people_count\\n          block_posts_count\\n          block_comment_count\\n          gender\\n          nickname\\n          banned_to_post\\n          avatar_url\\n          email\\n          weibo\\n          qq\\n          github\\n          phone\\n          area_code\\n          find_notification_at\\n          last_find_feed_at\\n          last_find_favorite_at\\n          has_password\\n          theme\\n          user_cover\\n          \"}],headers:{accessToken:t||n().user.accessToken}});case 2:u=a.sent,c=i(u,2),l=c[0],d=c[1],l?o([l]):(e&&(e({type:\"SET_USER\",userinfo:d}),t&&e({type:\"ADD_ACCESS_TOKEN\",access_token:t})),o([null,d]));case 7:case\"end\":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}}},281:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getSession=function(e){var t=e.people_id;return function(e,n){return new Promise(function(){var e=l(regeneratorRuntime.mark((function e(r){var i,o,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.default)({apis:[{api:\"getSession\",args:{people_id:t},fields:\"_id\"}],headers:{accessToken:n().user.accessToken}});case 2:i=e.sent,o=u(i,2),s=o[0],(c=o[1])&&c._id?r(c._id):console.log(s);case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},t.readSession=function(e){var t=e._id;return function(e,n){return new Promise(function(){var r=l(regeneratorRuntime.mark((function r(s){var u,c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:u=n(),(0,a.default)({type:\"mutation\",apis:[{api:\"readSession\",args:{_id:t},fields:\"success\"}],headers:{accessToken:u.user.accessToken}}),e({type:\"UPDATE_READ_BY_ID\",id:t}),(c=(0,o.getSessionListById)(u,\"all\"))&&c.data?(l=0,c.data.map((function(e){l+=e.unread_count})),e({type:\"SET_TIPS_BY_ID\",id:\"unread-message\",status:l})):(0,i.loadTips)()(e,n),s();case 6:case\"end\":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},t.updateSession=function(e){return function(t,n){return new Promise(function(){var a=l(regeneratorRuntime.mark((function a(r){var i,s,c,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d({id:\"new\",args:{_id:e,page_size:1},restart:!0})(t,n);case 2:s=a.sent,c=u(s,2),c[0],(i=c[1])&&i.data&&i.data[0]&&((l=(0,o.getSessionListById)(n(),\"all\"))&&l.data&&(l.data.some((function(t,n){return t._id==e&&(l.data.splice(n,1),!0)})),l.data.unshift(i.data[0]),t({type:\"SET_SESSION_LIST_BY_ID\",name:\"all\",data:l})),(l=n().session[e])&&(l.data=i.data,t({type:\"SET_SESSION_LIST_BY_ID\",name:e,data:l})));case 7:case\"end\":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},t.loadSessionList=void 0;var a=s(n(48)),r=n(171),i=n(176),o=n(175);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function c(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){c(i,a,r,o,s,\"next\",e)}function s(e){c(i,a,r,o,s,\"throw\",e)}o(void 0)}))}}var d=(0,s(n(117)).default)({reducerName:\"session\",actionType:\"SET_SESSION_LIST_BY_ID\",api:\"sessions\",fields:\"\\n    _id\\n    user_id{\\n      _id\\n      nickname\\n      avatar_url\\n    }\\n    addressee_id{\\n      _id\\n      nickname\\n      avatar_url\\n    }\\n    last_message{\\n      content_html\\n      create_at\\n    }\\n    unread_count\\n    create_at\\n    top_at\\n  \",processList:function(e){return e.map((function(e){if(e.create_at&&(e._create_at=(0,r.dateDiff)(e.create_at)),e.last_message)if(e.last_message._create_at=(0,r.dateDiff)(e.last_message.create_at),e.last_message.content_html){var t=e.last_message.content_html.replace(/<[^>]+>/g,\"\");t.length>200&&(t=t.slice(0,200)+\"...\"),e.last_message.content_summary=t}else e.last_message.content_summary=\"\"})),e}});t.loadSessionList=d},282:function(e,t,n){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0}),t.signUp=t.signOut=t.signIn=t.saveTokenToCookie=void 0;var a,r=(a=n(48))&&a.__esModule?a:{default:a},i=n(177),o=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n(116));function s(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function c(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){c(i,a,r,o,s,\"next\",e)}function s(e){c(i,a,r,o,s,\"throw\",e)}o(void 0)}))}}var d=function(t){var n=t.access_token;return function(t,a){return new Promise(function(){var t=l(regeneratorRuntime.mark((function t(a,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;break;case 2:e.ajax({url:\"/sign/in\",type:\"post\",data:{access_token:n},async:!1,success:function(e){e&&e.success?a(e):r(e)},error:function(e){console.log(e)}});case 3:case\"end\":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}};t.saveTokenToCookie=d;t.signIn=function(e){var t=e.data;return function(e,n){return new Promise(function(){var a=l(regeneratorRuntime.mark((function a(i,s){var c,l,f,p;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,r.default)({apis:[{api:\"signIn\",args:t,fields:\"\\n            user_id\\n            access_token\\n          \"}]});case 2:if(c=a.sent,l=u(c,2),f=l[0],p=l[1],!f){a.next=10;break}s(f?f.message:\"账号或密码错误\"),a.next=16;break;case 10:if(i(p),!p||!p.access_token||\"undefined\"==typeof document){a.next=16;break}return a.next=14,d(p)(e,n);case 14:o.get(\"service-worker\").uninstall(),setTimeout((function(){window.location.reload()}),300);case 16:case\"end\":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}};t.signOut=function(){return function(t,n){var a;(0,i.removeUnlockToken)()(t,n),e.ajax({url:\"/sign/out\",type:\"post\",success:(a=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.success?t.success&&\"undefined\"!=typeof window&&(o.get(\"service-worker\").uninstall(),setTimeout((function(){window.location.reload()}),300)):alert(\"退出失败\");case 1:case\"end\":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})})}};t.signUp=function(e){return function(t,n){return new Promise(function(){var t=l(regeneratorRuntime.mark((function t(n){var a,i,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,r.default)({type:\"mutation\",apis:[{api:\"addUser\",args:e,fields:\"success\"}]});case 2:a=t.sent,i=u(a,2),o=i[0],s=i[1],n(o?[o]:[null,s]);case 7:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}}).call(this,n(68))},283:function(e,t,n){\"use strict\";var a;Object.defineProperty(t,\"__esModule\",{value:!0}),t.loadTopicList=void 0;var r=(0,((a=n(117))&&a.__esModule?a:{default:a}).default)({reducerName:\"topic\",actionType:\"SET_TOPIC_LIST_BY_ID\",api:\"topics\",fields:\"\\n    _id\\n    name\\n    brief\\n    description\\n    avatar\\n    background\\n    follow_count\\n    posts_count\\n    comment_count\\n    sort\\n    create_at\\n    language\\n    recommend\\n    user_id\\n    follow\\n    parent_id {\\n      _id\\n      name\\n      brief\\n      avatar\\n    }\\n    children {\\n      _id\\n      name\\n      brief\\n      avatar\\n    }\\n  \"});t.loadTopicList=r},284:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getNotificationListById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_NOTIFICATION\":e=t.state;break;case\"SET_NOTIFICATION_LIST_BY_ID\":var n=t.name,a=t.data;n&&a&&(e[n]=a);break;case\"UPDATE_NOTIFICATION\":var o=t.id,s=t.update;for(var u in e)e[u].data.map((function(e){if(e._id==o)for(var t in s)e[t]=s[t]}));break;default:return e}return(0,r.default)(e)};t.getNotificationListById=function(e,t){return e.notification[t]}},285:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getPeopleListById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_PEOPLE\":e=t.state;break;case\"SET_PEOPLE_LIST_BY_ID\":var n=t.name,a=t.data;n&&a&&(e[n]=a);break;case\"UPDATE_PEOPLE\":var o=t.id,s=t.update;for(var u in e)e[u].data.map((function(e){if(e._id==o)for(var t in s)e[t]=s[t]}));break;case\"UPLOAD_PEOPLE_FOLLOW\":var c=t.peopleId,l=t.followStatus,d=t.selfId;for(var f in e){var p=e[f].data;p.map((function(e){e._id==c&&(e.fans_count+=l?1:-1,e.follow=l),e._id==d&&(e.follow_people_count+=l?1:-1)}))}break;default:return e}return(0,r.default)(e)};t.getPeopleListById=function(e,t){return e.people[t]}},286:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getCommentListById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_COMMENT_LIST_BY_ID\":var n=t.name,a=t.data;n&&a&&(e[n]=a);break;case\"SET_COMMENT\":return t.state;case\"UPDATE_COMMENT\":var o=t.id,s=t.update;for(var u in e)e[u].data.map((function(e){if(e._id==o)for(var t in s)e[t]=s[t];e.reply&&e.reply.map((function(e){if(e._id==o)for(var t in s)e[t]=s[t]}))}));break;case\"UPDATE_COMMENT_LIKE\":o=t.id;var c=t.status;for(var l in e)e[l].data.map((function(e){e._id==o&&(void 0!==e.like_count&&(e.like_count+=c?1:-1),void 0!==e.like&&(e.like=c)),e.reply&&e.reply.map((function(e){e._id==o&&(void 0!==e.like_count&&(e.like_count+=c?1:-1),void 0!==e.like&&(e.like=c))}))}));break;case\"REMOVE_COMMENT_BY_ID\":o=t.id;var d=function(t){if(t==o)return delete e[t],\"continue\";var n=e[t].data;n.map((function(e,t){e._id==o&&n.splice(t,1);var a=e.reply||[];a.map((function(e,t){e._id==o&&a.splice(t,1)}))}))};for(var f in e)d(f);break;default:return e}return(0,r.default)(e)};t.getCommentListById=function(e,t){return e.comment[t]}},287:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getCountries=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i=[];t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_COUNTRIES\":e=t.countries;break;default:return e}return(0,r.default)(e)};t.getCountries=function(e){return e.countries}},288:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getFeedListById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_FEED\":e=t.state;break;case\"SET_FEED_LIST_BY_ID\":var n=t.name,a=t.data;n&&a&&(e[n]=a);break;case\"UPDATE_COMMENT_LIKE\":var o=t.id,s=t.status,u=function(t){e[t].data.map((function(n,a){n.comment_id&&n.comment_id._id==o&&(e[t].data[a].comment_id.like=s,e[t].data[a].comment_id.like_count+=s?1:-1)}))};for(var c in e)u(c);break;default:return e}return(0,r.default)(e)};t.getFeedListById=function(e,t){return e.feed[t]}},289:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getHasReadByPostsId=function(e,t){var n=t.postsId,a=t.total;if(void 0!==e.hasReadPosts.posts[n])return a-e.hasReadPosts.posts[n];return-1},t.getHasReadByCommentId=function(e,t){var n=t.commentId,a=t.total;if(void 0!==e.hasReadPosts.comments[n]&&e.hasReadPosts.comments[n]>=a)return!0;return!1},t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={posts:{},comments:{}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"INIT_HAS_READ_POSTS_STATE\":e=t.state;break;case\"ADD_POSTS_HAS_READ\":var n=t.postsId,a=t.total,o=void 0===a?0:a;n&&(e.posts[n]=o);break;case\"ADD_COMMENT_HAS_READ\":var s=t.commentId,u=t.total;o=void 0===u?0:u;s&&(e.comments[s]=o);break;default:return e}return(0,r.default)(e)}},290:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getLiveListById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"ADD_LIVE_LIST_BY_ID\":var n=t.name,a=t.data;n&&a&&(e[n]=a);break;case\"ADD_AUDIENCE_BY_LIVE_ID\":console.log(\"+1\"),t.id&&(e[t.id].data[0].audience_count+=1);break;case\"REMOVE_AUDIENCE_BY_LIVE_ID\":console.log(\"-1\"),t.id&&(e[t.id].data[0].audience_count+=-1);break;default:return e}return(0,r.default)(e)};t.getLiveListById=function(e,t){return e.live[t]}},291:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.addMessagesToList=t.addMessage=t.loadMessageList=void 0;var a=u(n(48)),r=u(n(117)),i=n(171),o=n(88),s=n(78);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function l(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){l(i,a,r,o,s,\"next\",e)}function s(e){l(i,a,r,o,s,\"throw\",e)}o(void 0)}))}}var f=(0,r.default)({reducerName:\"message\",actionType:\"SET_MESSAGE_LIST_BY_ID\",api:\"messages\",unshift:!0,fields:\"\\n    _id\\n    user_id {\\n      _id\\n      nickname\\n      avatar_url\\n    }\\n    addressee_id {\\n      _id\\n      nickname\\n      avatar_url\\n    }\\n    type\\n    content_html\\n    create_at\\n  \",processList:function(e){var t=null;return e.map((function(e){(!t||new Date(t.create_at).getTime()-new Date(e.create_at).getTime()>3e5)&&(e._create_at=(0,i.dateDiff)(e.create_at),t=e)})),e.reverse(),e}});t.loadMessageList=f;t.addMessage=function(e){var t=e.addressee_id,n=e.type,r=e.content,i=e.content_html,o=e.device;return function(e,s){return new Promise(function(){var e=d(regeneratorRuntime.mark((function e(u){var l,d,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.default)({type:\"mutation\",apis:[{api:\"addMessage\",args:{addressee_id:t,type:n,content:r,content_html:i,device:o},fields:\"success\"}],headers:{accessToken:s().user.accessToken}});case 2:l=e.sent,d=c(l,2),f=d[0],p=d[1],u([f,p]);case 7:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}};t.addMessagesToList=function(e){var t=e.sessionId,n=e.messageId;return function(e,a){return new Promise(function(){var r=d(regeneratorRuntime.mark((function r(i){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:f({id:n,args:{_id:n}})(e,a).then((function(n){var r=c(n,2),i=(r[0],r[1]),u=i.data[0];if((0,s.getUserInfo)(a())._id==u.addressee_id._id){var l=u.content_html;l=(l=(l=l.replace(/<[^>]+>/g,\"\")).replace(/\\r\\n/g,\"\")).replace(/\\n/g,\"\"),(0,o.sendNotification)({content:u.user_id.nickname||\"私信\",option:{body:l,icon:\"https:\"+u.user_id.avatar_url,image:\"https:\"+u.user_id.avatar_url,tag:\"message\",data:{message:u}}})(e,a)}var d=a().message[t];d&&d.data&&(d.data.push(i.data[0]),e({type:\"SET_MESSAGE_LIST_BY_ID\",name:t,data:d}))}));case 1:case\"end\":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}}},292:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.isAndroidWechat=t.isiOSWechat=t.isWeChat=t.isSafari=t.isAndroid=t.isiOS=void 0;var a=function(){var e=navigator.userAgent;navigator.appVersion;return!!e.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/)};t.isiOS=a;var r=function(){var e=navigator.userAgent;navigator.appVersion;return e.indexOf(\"Android\")>-1||e.indexOf(\"Linux\")>-1};t.isAndroid=r;t.isSafari=function(){return/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)};var i=function(){return\"micromessenger\"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)};t.isWeChat=i;t.isiOSWechat=function(){navigator.userAgent.toLowerCase();return!(!i()||!a())};t.isAndroidWechat=function(){navigator.userAgent.toLowerCase();return!(!i()||!r())}},293:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.addHasRead=t.initHasRead=void 0;var a=i(n(172)),r=i(n(118));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function s(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}t.initHasRead=function(){return function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var i,s,u,c,l,d,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.default)(a.default.load({key:\"has-read-posts\"}));case 2:return u=e.sent,(c=o(u,2))[0],l=c[1],i=void 0===l?\"{}\":l,e.next=9,(0,r.default)(a.default.load({key:\"has-read-comments\"}));case 9:d=e.sent,(f=o(d,2))[0],p=f[1],s=void 0===p?\"{}\":p,i=JSON.parse(i),s=JSON.parse(s),t({type:\"INIT_HAS_READ_POSTS_STATE\",state:{posts:i,comments:s}});case 17:case\"end\":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,u,\"next\",e)}function u(e){s(i,a,r,o,u,\"throw\",e)}o(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()};t.addHasRead=function(e){var t=e.postsId,n=e.commentId,r=e.total;return function(e,i){t?(e({type:\"ADD_POSTS_HAS_READ\",postsId:t,total:r}),a.default.save({key:\"has-read-posts\",data:JSON.stringify(i().hasReadPosts.posts),expires:2592e6})):(e({type:\"ADD_COMMENT_HAS_READ\",commentId:n,total:r}),a.default.save({key:\"has-read-comments\",data:JSON.stringify(i().hasReadPosts.comments),expires:2592e6}))}}},294:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getCaptchaById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"ADD_CAPTCHA_ID\":var n=t.id,a=t.data;n&&a&&(e[n]=a);break;default:return e}return(0,r.default)(e)};t.getCaptchaById=function(e,t){return e.captcha[t]||null}},295:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getFollowListById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_FOLLOW\":e=t.state;case\"SET_FOLLOW_LIST_BY_ID\":var n=t.name,a=t.data;n&&a&&(e[n]=a);break;case\"UPDATE_FOLLOW\":var o=t.id,s=t.selfId,u=t.followStatus;for(var c in e){var l=e[c].data;l.length>0&&l.map((function(e){e.people_id&&e.people_id._id==o&&(e.people_id.follow=u),e.people_id&&e.people_id._id==s&&(e.people_id.follow_people_count+=u?1:-1),e.user_id&&e.user_id._id==o&&(e.user_id.follow=u),e.user_id&&e.user_id._id==s&&(e.user_id.fans_count+=u?1:-1),e.topic_id&&e.topic_id._id==o&&(e.topic_id.follow=u),e.posts_id&&e.posts_id._id==o&&(e.posts_id.follow=u)}))}break;default:return e}return(0,r.default)(e)};t.getFollowListById=function(e,t){return e.follow[t]}},296:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getReportTypes=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i=[];t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"ADD_REPORT_TYPES\":e=t.types;break;default:return e}return(0,r.default)(e)};t.getReportTypes=function(e){return e.reportTypes}},297:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getBlockListById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_BLOCK_STATE\":e=t.state;case\"SET_BLOCK_LIST_BY_ID\":var n=t.name,a=t.data;n&&a&&(e[n]=a);break;case\"REMOVE_BLOCK_BY_ID\":for(var o in e){var s=e[o].data;if(s.length>0)for(var u=0,c=s.length;u<c;u++)if(s[u]._id==t.id){s.splice(u,1);break}}break;default:return e}return(0,r.default)(e)};t.getBlockListById=function(e,t){return e.block[t]||null}},298:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getMessageListById=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SET_MESSAGE\":e=t.state;case\"SET_MESSAGE_LIST_BY_ID\":var n=t.name,a=t.data;n&&a&&(e[n]=a);break;case\"UPDATE_MESSAGE\":var o=t.id,s=t.update;for(var u in e)e[u].data.map((function(e){if(e._id==o)for(var t in s)e[t]=s[t]}));break;default:return e}return(0,r.default)(e)};t.getMessageListById=function(e,t){return e.message[t]}},299:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.emit=t.removeListener=t.addListener=t.close=t.connect=void 0;var a,r,i=(a=n(558))&&a.__esModule?a:{default:a},o=n(77),s=n(88),u=n(78),c=n(176),l=n(281),d=n(291);t.connect=function(e){var t=e.dispatch,n=e.getState,a=n().user.userInfo,f=(0,u.getAccessToken)(n()),p=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e(a)(t,n)},m=function(e){try{\"string\"==typeof e&&(e=JSON.parse(e))}catch(t){e=\"\",console.log(t)}if(e&&e.type){var t=e,n=t.type,r=t.data;switch(n){case\"online-user\":p(s.setOnlineUserCount,r);break;case\"discover\":a?p(c.loadTips,\"discover\"):setTimeout((function(){p(c.loadTips,\"discover\")}),6e4);break;case\"notification\":if(p(c.loadTips,\"notification\"),r&&r.comment_id&&\"comment\"==r.type||r&&r.comment_id&&\"reply\"==r.type){var i=r.comment_id.content_html;i=(i=(i=i.replace(/<[^>]+>/g,\"\")).replace(/\\r\\n/g,\"\")).replace(/\\n/g,\"\"),p(s.sendNotification,{content:r.sender_id.nickname,option:{body:i,icon:\"https:\"+r.sender_id.avatar_url,image:\"https:\"+r.sender_id.avatar_url,tag:\"comment\",data:r}})}break;case\"new-feed\":p(c.loadTips,\"new-feed\");break;case\"recommend-posts\":p(c.loadTips);break;case\"new-session\":p(c.loadTips,\"new-session\"),p(l.updateSession,r.sessionId),p(d.addMessagesToList,r)}}};(r=(0,i.default)(o.api.socket,{reconnection:!0,reconnectionAttempts:15,reconnectionDelay:3e3,query:{accessToken:f}})).on(\"connect\",(function(){console.log(\"socket connect success.\"),r.on(\"all\",m),a&&r.on(a._id,m),a&&r.on(\"member\",m)})),r.on(\"disconnect\",(function(){console.log(\"socket has disconnect.\")})),a&&a._id&&p(c.loadTips)};t.close=function(){r&&(r.close(),r=null)};t.addListener=function(e,t){r.on(e,t)};t.removeListener=function(e){};t.emit=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};r.emit(e,t,n)}},300:function(e,t,n){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){return r.apply(this,arguments)};n(589);function a(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}function r(){var t;return t=regeneratorRuntime.mark((function t(n){var a,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=!1,(!n||n&&0==n.theme)&&((r=(new Date).getHours())>=21||r<=6)&&(a=!0),n?(i=\"light-theme\",0==n.theme?i=a?\"dark-theme\":\"light-theme\":2==n.theme&&(i=\"dark-theme\"),e(\"html\").attr(\"id\",i)):e(\"html\").attr(\"id\",a?\"dark-theme\":\"light-theme\");case 3:case\"end\":return t.stop()}}),t)})),(r=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(e){a(o,r,i,s,u,\"next\",e)}function u(e){a(o,r,i,s,u,\"throw\",e)}s(void 0)}))}).apply(this,arguments)}}).call(this,n(68))},303:function(e,t,n){n(304),n(490),n(68),n(212),n(491),n(492),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(501),e.exports=n(502)},48:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=n(77),r=s(n(119)),i=s(n(118)),o=s(n(538));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function l(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){l(i,a,r,o,s,\"next\",e)}function s(e){l(i,a,r,o,s,\"throw\",e)}o(void 0)}))}}var f=function(){var e=d(regeneratorRuntime.mark((function e(t){var n,s,u,l,f,v,h,y,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.type,s=void 0===n?\"query\":n,u=t.headers,l=void 0===u?{}:u,f=t.cache,void 0!==f&&f,v=t.apis,h=t.multiple,y=void 0!==h&&h,g=\"\",v.map((function(e){var t=e.aliases,n=void 0===t?\"\":t,a=e.api,r=e.args,i=void 0===r?{}:r,o=e.fields,s=void 0===o?\"\":o;i=p(i),g+=\"\".concat(n?n+\":\":\"\").concat(a).concat(i),s&&(g+=\"{\\n        \".concat(s,\"\\n      }\\n      \"))})),e.abrupt(\"return\",(0,i.default)(new Promise(function(){var e=d(regeneratorRuntime.mark((function e(t,n){var i,u,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.default)({url:a.api.graphql.client,method:\"post\",headers:l,data:{operationName:null,variables:{},query:\"\".concat(s,\"{\\n          \").concat(g,\"\\n        }\")}});case 2:i=e.sent,u=c(i,2),d=u[0],f=u[1],r.default.apiLog&&(console.log(\"### request api\"),console.log(\"\".concat(s,\"{\\n        \").concat(g,\"\\n      }\")),console.log(\"### request result\"),console.log(f)),f&&!f.errors?1!=v.length||y?t(f.data):t(f.data[v[0].aliases||v[0].api]):f&&f.errors?0!=f.errors.length?(f.errors.map((function(e){e=m(e)})),n(f.errors[0])):n({message:f.errors||\"未知错误\"}):(console.log(d),n({message:\"未知错误\"}));case 8:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())));case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=f;var p=function(e){var t=[];for(var n in e){var a=\"\";switch(u(e[n])){case\"string\":a='\"'+e[n].replace(/(\\\\|\\\"|\\n|\\r)/g,\"\\\\$1\")+'\"';break;case\"object\":a=JSON.stringify(e[n]);break;default:a=e[n]}t.push(n+\":\"+a)}var r=\"(\"+t.join(\",\")+\")\";return t.length>0?r:\"\"},m=function(e){if(e.data&&e.data.error_data)for(var t in e.data.error_data)e.message=(n=e.message,a=t,r=e.data.error_data[t],n.replace(new RegExp(\"({\"+a+\"})\",\"g\"),r));var n,a,r;return e}},492:function(e,t,n){\"use strict\";\n/*!\n * Toastify js 0.0.6\n * https://github.com/apvarun/toastify-js\n * @license MIT licensed\n *\n * Copyright (C) 2017 Varun A P\n */var a,r;a=\"undefined\"!=typeof window?window:{},(r=function e(t){return new e.lib.init(t)}).lib=r.prototype={toastify:\"0.0.5\",constructor:r,init:function(e){return e||(e={}),this.options={},this.options.text=e.text||\"Hi there!\",this.options.duration=e.duration||3e3,this.options.selector=e.selector,this.options.callback=e.callback||function(){},this.options.destination=e.destination,this.options.newWindow=e.newWindow||!1,this.options.close=e.close||!1,this.options.gravity=\"bottom\"==e.gravity?\"bottom\":\"top\",this.options.positionLeft=e.positionLeft||!1,this.options.backgroundColor=e.backgroundColor||\"linear-gradient(135deg, #73a5ff, #5477f5)\",this},buildToast:function(){if(!this.options)throw\"Toastify is not initialized\";var e=document.createElement(\"div\");if(e.className=\"toastify on\",!0===this.options.positionLeft?e.className+=\" left\":e.className+=\" right\",e.className+=\" \"+this.options.gravity,e.style.background=this.options.backgroundColor,e.innerHTML=this.options.text,!0===this.options.close){var t=document.createElement(\"span\");t.innerHTML=\"&#10006;\",t.className=\"toast-close\",t.addEventListener(\"click\",function(e){this.removeElement(e.target.parentElement)}.bind(this));var n=window.innerWidth>0?window.innerWidth:screen.width;!0===this.options.positionLeft&&n>360?e.prepend(t):e.appendChild(t)}if(void 0!==this.options.destination){var a=document.createElement(\"a\");return a.setAttribute(\"href\",this.options.destination),!0===this.options.newWindow&&a.setAttribute(\"target\",\"_blank\"),e.className=\"\",a.className=\"toastify on\",!0===this.options.positionLeft?a.className+=\" left\":a.className+=\" right\",a.className+=\" \"+this.options.gravity,e.style.background=\"\",a.style.background=this.options.backgroundColor,a.appendChild(e),a}return e},showToast:function(){var e,t=this.buildToast();if(!(e=void 0===this.options.selector?document.body:document.getElementById(this.options.selector)))throw\"Root element is not defined\";return e.insertBefore(t,e.firstChild),r.reposition(),window.setTimeout(function(){this.removeElement(t)}.bind(this),this.options.duration),this},removeElement:function(e){e.classList.remove(\"on\"),window.setTimeout(function(){e.remove(),this.options.callback.call(e),r.reposition()}.bind(this),400)}},r.reposition=function(){for(var e,t={top:15,bottom:15},n={top:15,bottom:15},a={top:15,bottom:15},r=document.getElementsByClassName(\"toastify\"),i=0;i<r.length;i++){e=!0===r[i].classList.contains(\"top\")?\"top\":\"bottom\";var o=r[i].offsetHeight;(window.innerWidth>0?window.innerWidth:screen.width)<=360?(r[i].style[e]=a[e]+\"px\",a[e]+=o+15):!0===r[i].classList.contains(\"left\")?(r[i].style[e]=t[e]+\"px\",t[e]+=o+15):(r[i].style[e]=n[e]+\"px\",n[e]+=o+15)}return this},r.lib.init.prototype=r.lib,a.Toastify=r},494:function(e,t,n){\"use strict\";window.webPictureViewer=function(){var e=document.createElement(\"style\");e.type=\"text/css\",e.textContent=\"\",document.getElementsByTagName(\"HEAD\").item(0).appendChild(e);var t=function(t){e.textContent=t};function n(e,t){for(var n in t)e.style[n]=t[n],\"opacity\"===n?e.style.filter=\"alpha(opacity=\"+100*t[n]+\")\":\"transform\"===n&&(e.style.transform=t[n],e.style[\"-ms-transform\"]=t[n],e.style[\"-moz-transform\"]=t[n],e.style[\"-webkit-transform\"]=t[n],e.style[\"-o-transform\"]=t[n])}var a,r=((a=function(){this.devices={1:\"unknow\",2:\"windows\",3:\"mac\",4:\"ipad\",5:\"iphone\",6:\"android\"}}).prototype.getCurrentDeviceId=function(){var e=\"unknow\",t=navigator.platform,n=navigator.userAgent.toLowerCase(),a={windows:0==t.indexOf(\"Win\"),mac:0==t.indexOf(\"Mac\"),ipad:\"ipad\"==n.match(/ipad/i),iphone:\"iphone os\"==n.match(/iphone os/i),android:\"android\"==n.match(/android/i)};for(var r in a)a[r]&&(e=r);for(var r in this.devices)if(this.devices[r]==e)return r;return 1},a.prototype.getNameByDeviceId=function(e){return this.devices[e]},a.prototype.isPC=function(){var e=this.getCurrentDeviceId();return 1===e||2==e||3==e},a.prototype.isMobile=function(){var e=this.getCurrentDeviceId();return 4==e||5==e||6==e},new a),i=function(){this.status=!1,this.body=document.getElementsByTagName(\"body\")[0],this.html=document.getElementsByTagName(\"html\")[0],this.images=[],this.imagesInfo=[],this.$marklayer=document.createElement(\"div\"),this.$close=document.createElement(\"a\"),this.$close.innerHTML=\"close\",this.$previous=document.createElement(\"a\"),this.$previous.innerHTML=\"previous\",this.$next=document.createElement(\"a\"),this.$next.href=\"javascript:;\",this.$next.innerHTML=\"next\",this.$quantity=document.createElement(\"div\"),this.clientWidth=document.documentElement.clientWidth,this.clientHeight=document.documentElement.clientHeight,this.currentImgIndex=0};i.prototype.init=function(){this.body.appendChild(this.$close),this.body.appendChild(this.$previous),this.body.appendChild(this.$next),this.body.appendChild(this.$marklayer),n(this.$marklayer,{position:\"fixed\",width:\"100%\",height:\"100%\",left:0,top:0,zIndex:\"1000\",overflowX:\"auto\",overflow:\"scroll\",backgroundColor:\"rgba(0, 0, 0, .5)\",display:\"none\"}),n(this.$close,{position:\"fixed\",top:\"0\",left:\"100%\",width:\"60px\",height:\"30px\",lineHeight:\"30px\",textAlign:\"center\",margin:\"10px 0 0 -70px\",color:\"#fff\",background:\"#000\",opacity:\"0.3\",zIndex:\"999999\",display:\"none\"}),n(this.$previous,{position:\"fixed\",top:\"0\",left:\"0\",width:\"60px\",height:\"30px\",lineHeight:\"30px\",textAlign:\"center\",margin:\"-15px 0 0 -60px\",color:\"#fff\",background:\"#000\",opacity:\"0.3\",zIndex:\"999999\",display:\"none\"}),n(this.$next,{position:\"fixed\",top:\"0\",left:\"0\",width:\"60px\",height:\"30px\",lineHeight:\"30px\",textAlign:\"center\",margin:\"-15px 0 0 0\",color:\"#fff\",background:\"#000\",opacity:\"0.3\",zIndex:\"999999\",display:\"none\"})},i.prototype.hide=function(){var e=this;t(\"@keyframes fade-out { 0% { opacity:1; } 100% { opacity:0; } } @-ms-keyframes fade-out { 0% { opacity:1; } 100% { opacity:0; } } @-moz-keyframes fade-out { 0% { opacity:1; } 100% { opacity:0; } } @-webkit-keyframes fade-out { 0% { opacity:1; } 100% { opacity:0; } } @-o-keyframes fade-out { 0% { opacity:1; } 100% { opacity:0; } } .fade-out{animation-name: fade-out; -webkit-animation-duration: .5s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -ms-animation-name: fade-out; -webkit-animation-duration: .5s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -moz-animation-name: fade-out; -webkit-animation-duration: .5s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -webkit-animation-name: fade-out; -webkit-animation-duration: .5s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -o-animation-name: fade-out; -webkit-animation-duration: .5s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; }\");this.$marklayer.addEventListener(\"webkitAnimationEnd\",(function t(){e.$marklayer.removeEventListener(\"webkitAnimationEnd\",t,!1),e.$marklayer.style.display=\"none\",e.$marklayer.className=\"\";for(var n=0,a=e.images.length;n<a;n++){var r=e.images[n].parentNode;r.parentNode.removeChild(r)}e.images.length=0,e.imagesInfo.length=0,e.currentImgIndex=0}),!1),this.$marklayer.className=\"fade-out\",this.$close.style.display=\"none\",this.$previous.style.display=\"none\",this.$next.style.display=\"none\",this.status=!1,n(this.body,{overflow:\"\"}),n(this.html,{overflow:\"\"})},i.prototype.scale=function(e,t){var a=this.imagesInfo[this.currentImgIndex];a.scale=e/a.width,n(this.images[this.currentImgIndex],{transform:\"scale(\"+a.scale+\",\"+a.scale+\") translate(\"+a.translate.x+\"px, \"+a.translate.y+\"px)\"})},i.prototype.adjustPosition=function(e,a){e=e||this.currentImgIndex;var r=this.imagesInfo[e],i=parseInt(r.width*r.scale),o=parseInt(r.height*r.scale),s={x:0,y:0};a||(a=i,i<this.clientWidth?i<r.width&&(a=r.width>this.clientWidth?this.clientWidth:r.width):i>3*r.width?a=3*r.width:i>3*this.clientWidth&&(a=3*this.clientWidth));var u=a/r.width;if(o>this.clientHeight){var c=parseInt((r.height*u-this.clientHeight)/u/2);r.translate.y<-1*c&&r.translate.y>c?s.y=0:r.translate.y<-1*c?s.y=-c:r.translate.y>c?s.y=c:s.y=r.translate.y}else r.height>this.clientHeight&&0!=r.translate.y&&(s.y=r.translate.y);if(i>this.clientWidth){var l=parseInt((r.width*u-this.clientWidth)/u/2);r.translate.x<-1*l&&r.translate.x>l?s.x=0:r.translate.x<-1*l?s.x=-l:r.translate.x>l?s.x=l:s.x=r.translate.x}else r.width>this.clientWidth&&0!=r.translate.x&&(s.x=r.translate.x);n(this.images[e],{transform:\"scale(\"+u+\", \"+u+\") translate(\"+s.x+\"px, \"+s.y+\"px)\"}),s.x===r.translate.x&&s.y===r.translate.y&&r.scale===u||(t(\"@keyframes fadeIn { 0% { transform:scale(\"+r.scale+\", \"+r.scale+\") translate(\"+r.translate.x+\"px, \"+r.translate.y+\"px); } 100% { transform:scale(\"+u+\", \"+u+\") translate(\"+s.x+\"px, \"+s.y+\"px); }} @-ms-keyframes fadeIn { 0% { -ms-transform:scale(\"+r.scale+\", \"+r.scale+\") translate(\"+r.translate.x+\"px, \"+r.translate.y+\"px); } 100% { -ms-transform:scale(\"+u+\", \"+u+\") translate(\"+s.x+\"px, \"+s.y+\"px); }} @-moz-keyframes fadeIn { 0% { -moz-transform:scale(\"+r.scale+\", \"+r.scale+\") translate(\"+r.translate.x+\"px, \"+r.translate.y+\"px); } 100% { -moz-transform:scale(\"+u+\", \"+u+\") translate(\"+s.x+\"px, \"+s.y+\"px); }} @-webkit-keyframes fadeIn { 0% { -webkit-transform:scale(\"+r.scale+\", \"+r.scale+\") translate(\"+r.translate.x+\"px, \"+r.translate.y+\"px); } 100% { -webkit-transform:scale(\"+u+\", \"+u+\") translate(\"+s.x+\"px, \"+s.y+\"px); }} @-o-keyframes fadeIn { 0% { -o-transform:scale(\"+r.scale+\", \"+r.scale+\") translate(\"+r.translate.x+\"px, \"+r.translate.y+\"px); } 100% { -o-transform:scale(\"+u+\", \"+u+\") translate(\"+s.x+\"px, \"+s.y+\"px); }} .scaling{animation-name: fadeIn; -webkit-animation-duration: .4s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -ms-animation-name: fadeIn; -webkit-animation-duration: .4s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -moz-animation-name: fadeIn; -webkit-animation-duration: .4s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -webkit-animation-name: fadeIn; -webkit-animation-duration: .4s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -o-animation-name: fadeIn; -webkit-animation-duration: .4s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; }\"),this.images[e].className=\"scaling\",r.translate=s,r.scale=u)},i.prototype.mobileInit=function(){var e=this,a=!1,r={x:0,y:0},i=0,o=0,s=0,u=!1,c=null,l=null;this.$marklayer.ontouchstart=function(t){if(t.preventDefault(),!u){s=0,u=!1,c=null,r={x:t.touches[0].clientX,y:t.touches[0].clientY};var n=e.imagesInfo[e.currentImgIndex];e.images[e.currentImgIndex].className=\"\",n._scale=n.scale,t.touches.length>1&&(a=!0)}},this.$marklayer.ontouchmove=function(t){t.preventDefault(),u=!0;var l=t.touches[0].clientX,d=t.touches[0].clientY,f=t.touches[1]?{x:t.touches[1].clientX,y:t.touches[1].clientY}:null,p=e.imagesInfo[e.currentImgIndex],m={x:l-r.x,y:d-r.y};if(a&&f){var v=l-f.x,h=d-f.y,y=(v=v<0?-1*v:v)>(h=h<0?-1*h:h)?v:h;0==s&&(s=y);var g=2*(y-s)+p.width*p._scale;g<=10&&(g=10),e.scale(g)}else if(!a){if(m={x:-parseInt((r.x-l)/(p.scale||1)),y:-parseInt((r.y-d)/(p.scale||1))},o=p.translate.x+m.x,i=p.translate.y+m.y,1===p.scale){var _=m.x<0?-1*m.x:m.x,b=m.y<0?-1*m.y:m.y;if(null===c&&(c=!(_>b)),!1===c?i=p.translate.y:!0===c&&(o=p.translate.x),!1===c){var w=o>0?e.currentImgIndex-1:e.currentImgIndex+1;return e.images[w]&&(e.images[w].parentNode.className=\"\",n(e.images[w].parentNode,{transform:\"translate(\"+(-e.clientWidth*e.currentImgIndex+o+(o>0?-30:30))+\"px, 0px)\"})),e.images[e.currentImgIndex].parentNode.className=\"\",void n(e.images[e.currentImgIndex].parentNode,{transform:\"translate(\"+(-e.clientWidth*e.currentImgIndex+o)+\"px, 0px)\"})}}n(e.images[e.currentImgIndex],{transform:\"scale(\"+p.scale+\",\"+p.scale+\") translate(\"+o+\"px, \"+i+\"px)\"})}},this.$marklayer.ontouchend=function(r){if(u)if(a||0!=r.touches.length)a&&0==r.touches.length&&(a=!1,u=!1,e.adjustPosition());else{u=!1;v=e.imagesInfo[e.currentImgIndex];if(!1===c){var s=e.currentImgIndex,d=o>0?e.currentImgIndex-1:e.currentImgIndex+1,f=\"\";if(e.images[d]){e.currentImgIndex=d;var p=\" fadeIna { 0% { transform:\"+e.images[e.currentImgIndex].parentNode.style.transform+\"; } 100% { transform:translate(\"+-e.clientWidth*e.currentImgIndex+\"px, 0px); }} \";n(e.images[e.currentImgIndex].parentNode,{transform:\"translate(\"+-e.clientWidth*e.currentImgIndex+\"px, 0px)\"}),f+=\"@keyframes\"+p+\"@-ms-keyframes\"+p+\"@-moz-keyframes\"+p+\"@-webkit-keyframes\"+p+\"@-o-keyframes\"+p+\".scaling1{animation-name: fadeIna; -webkit-animation-duration: .3s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -ms-animation-name: fadeIna; -webkit-animation-duration: .3s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -moz-animation-name: fadeIna; -webkit-animation-duration: .3s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -webkit-animation-name: fadeIna; -webkit-animation-duration: .3s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -o-animation-name: fadeIna; -webkit-animation-duration: .3s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; }\"}if(e.images[s]){if(e.images[d])var m=o>0?-30:30;else m=0;p=\" fadeInb { 0% { transform:\"+e.images[s].parentNode.style.transform+\"; } 100% { transform:translate(\"+-(e.clientWidth*e.currentImgIndex+m)+\"px, 0px); }} \";n(e.images[s].parentNode,{transform:\"translate(\"+-(e.clientWidth*e.currentImgIndex+m)+\"px, 0px)\"}),f+=\"@keyframes\"+p+\"@-ms-keyframes\"+p+\"@-moz-keyframes\"+p+\"@-webkit-keyframes\"+p+\"@-o-keyframes\"+p+\".scaling2{animation-name: fadeInb; -webkit-animation-duration: .3s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -ms-animation-name: fadeInb; -webkit-animation-duration: .3s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -moz-animation-name: fadeInb; -webkit-animation-duration: .3s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -webkit-animation-name: fadeInb; -webkit-animation-duration: .3s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -o-animation-name: fadeInb; -webkit-animation-duration: .3s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; }\"}t(f),e.images[e.currentImgIndex].parentNode.className=\"scaling1\",e.images[s].parentNode.className=\"scaling2\"}else v.translate.x=o,v.translate.y=i,e.adjustPosition()}else{if(l){var v=e.imagesInfo[e.currentImgIndex];return clearTimeout(l),l=null,void e.adjustPosition(e.currentImgIndex,v.scale<=1?2*this.clientWidth:this.clientWidth)}l=setTimeout((function(){e.hide(),l=null}),300)}},this.$close.ontouchend=function(t){t.preventDefault(),e.hide()}},i.prototype.mobile=function(e,a){\"string\"==typeof e&&(e=[e]);var r=this;this.currentImgIndex=a,n(this.body,{overflow:\"hidden\"}),n(this.html,{overflow:\"hidden\"}),this.$marklayer.style.display=\"\",t(\"@keyframes fade-in { 0% { opacity:0; } 100% { opacity:1; } } @-ms-keyframes fade-in { 0% { opacity:0; } 100% { opacity:1; } } @-moz-keyframes fade-in { 0% { opacity:0; } 100% { opacity:1; } } @-webkit-keyframes fade-in { 0% { opacity:0; } 100% { opacity:1; } } @-o-keyframes fade-in { 0% { opacity:0; } 100% { opacity:1; } } .fade-in{animation-name: fade-in; -webkit-animation-duration: .5s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -ms-animation-name: fade-in; -webkit-animation-duration: .5s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -moz-animation-name: fade-in; -webkit-animation-duration: .5s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -webkit-animation-name: fade-in; -webkit-animation-duration: .5s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; -o-animation-name: fade-in; -webkit-animation-duration: .5s; -webkit-animation-iteration-count: 1; -webkit-animation-delay: 0s; }\"),this.$marklayer.className=\"fade-in\";this.$marklayer.addEventListener(\"webkitAnimationEnd\",(function e(){r.$marklayer.removeEventListener(\"webkitAnimationEnd\",e,!1),r.$marklayer.className=\"\",r.$marklayer.style.display=\"\"}),!1);for(var i=0,o=e.length;i<o;i++){var s=document.createElement(\"div\"),u=document.createElement(\"div\"),c=new Image;n(c,{display:\"none\"}),u.innerHTML=\"loading\",n(u,{position:\"relative\",left:\"50%\",top:\"50%\",color:\"#fff\"}),c.onload=function(e,t,a){return function(){n(t,{display:\"none\"});var r=e.images[a],i=r.width>e.clientWidth?e.clientWidth/r.width:1;e.imagesInfo[a]={img:r,original:{width:r.width,height:r.height},width:parseInt(r.width*i),height:parseInt(r.height*i),scale:1,translate:{x:0,y:0},_scale:1};var o=e.imagesInfo[a];o.height>e.clientHeight&&(o.translate.y=o.height/2-e.clientHeight/2),n(r,{display:\"\",position:\"absolute\",width:o.width+\"px\",height:o.height+\"px\",top:\"50%\",left:\"50%\",margin:-o.height/2+\"px 0 0 \"+-o.width/2+\"px\",transform:\"scale(\"+o.scale+\",\"+o.scale+\") translate(\"+o.translate.x+\"px, \"+o.translate.y+\"px)\"}),0==a&&e.mobileInit()}}(this,u,this.images.length),c.src=e[i],this.images.push(c),s.appendChild(c),s.appendChild(u),this.$marklayer.appendChild(s),n(s,{position:\"inherit\",width:\"100%\",height:\"100%\",left:100*(this.images.length-1)+\"%\",top:0,transform:\"translate(-\"+this.currentImgIndex*this.clientWidth+\"px, 0px)\"})}},i.prototype.pc=function(e,t){\"string\"==typeof e&&(e=[e]),this.currentImgIndex=t,n(this.body,{overflow:\"hidden\"}),n(this.html,{overflow:\"hidden\"}),this.$marklayer.style.display=\"\",this.$close.style.display=\"\";for(var a=0,r=e.length;a<r;a++){var i=document.createElement(\"div\"),o=document.createElement(\"div\"),s=new Image;n(i,{position:\"absolute\",display:\"none\",width:\"800px\",height:\"100%\",left:\"50%\",top:0,margin:\"0 0 0 -400px\"}),o.innerHTML=\"loading\",n(o,{position:\"relative\",left:\"50%\",top:\"50%\",color:\"#fff\"}),n(s,{display:\"none\"}),s.onload=function(e,t,a,r){return function(){n(a,{display:\"none\"});var t=e.images[r],i=t.width>800?800/t.width:1;e.imagesInfo[r]={width:parseInt(t.width*i),height:parseInt(t.height*i),scale:1,translate:{x:0,y:0}};var o=e.imagesInfo[r];t.width=o.width,t.height=o.height,n(t,{position:\"absolute\",top:\"50%\",left:\"50%\",margin:-o.height/2+\"px 0 0 \"+-o.width/2+\"px\",transform:\"scale(\"+o.s+\",\"+o.s+\") translate(0px, 0px)\"}),o.height>o.width&&o.height>e.clientHeight&&(o.translate.y=(o.height*o.scale-e.clientHeight)/o.scale/2,n(t,{transform:\"scale(\"+o.scale+\",\"+o.scale+\") translate(\"+o.translate.x+\"px, \"+o.translate.y+\"px)\"}))}}(this,0,o,this.images.length),s.src=e[a],this.images.push(s),i.appendChild(s),i.appendChild(o),this.$marklayer.appendChild(i)}this.pcInit(),this.showImg(this.currentImgIndex)},i.prototype.pcInit=function(){var e=this;this.$next.onclick=function(t){t.preventDefault(),e.next()},this.$previous.onclick=function(t){t.preventDefault(),e.previous()},this.$close.onclick=function(t){t.preventDefault(),e.hide()},this.$marklayer.onclick=function(t){t.preventDefault(),e.hide()}},i.prototype.showImg=function(e){var t=this.images[this.currentImgIndex].parentNode,a=this.images[e].parentNode;n(t,{display:\"none\"}),n(a,{display:\"\"}),n(this.images[this.currentImgIndex],{display:\"none\"}),n(this.images[e],{display:\"\"}),this.currentImgIndex=e,this.uploadButtonPosition()},i.prototype.previous=function(){this.images[this.currentImgIndex-1]&&this.showImg(this.currentImgIndex-1)},i.prototype.next=function(){this.images[this.currentImgIndex+1]&&this.showImg(this.currentImgIndex+1)},i.prototype.uploadButtonPosition=function(){var e=this.images[this.currentImgIndex].parentNode,t=e.offsetLeft,a=e.offsetTop,r=e.clientWidth,i=e.clientHeight;n(this.$previous,{left:t+\"px\",top:a+i/2+\"px\",display:this.images[this.currentImgIndex-1]?\"\":\"none\"}),n(this.$next,{left:t+r+\"px\",top:a+i/2+\"px\",display:this.images[this.currentImgIndex+1]?\"\":\"none\"})};var o=null;return function(e,t){t=t||0,o||(o=new i).init(),r.isPC()?o.pc(e,t):o.mobile(e,t)}}()},495:function(e,t,n){\"use strict\";!function(){if(\"undefined\"!=typeof window&&\"undefined\"!=typeof document){var e=[],t=document.documentElement.clientHeight,n=function(e){t=document.documentElement.clientHeight},a=function(n){var a=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0,r=document.body.scrollHeight||document.documentElement.scrollTop;if(a+t>=r-100){var i=(new Date).getTime();e.map((function(e){e.timestamp&&i-e.timestamp<1e3||(e.timestamp=i,e.callback())}))}};window.attachEvent?(window.attachEvent(\"onscroll\",a),window.attachEvent(\"onresize\",n)):(window.addEventListener(\"scroll\",a,!1),window.addEventListener(\"resize\",n,!1)),window.ArriveFooter={add:function(t,n){e.push({name:t,callback:n})},remove:function(t){for(var n=0,a=e.length;n<a;n++)if(e[n].name==t){e.splice(n,1);break}}}}}()},496:function(e,t,n){\"use strict\";!function(e){if(\"undefined\"!=typeof window){var t,n,a,r=[],i=[];t=window,n=\"scroll\",a=function(){var e=document.documentElement&&document.documentElement.scrollTop?document.documentElement:document.body;r.map((function(t){return t(e.scrollLeft,e.scrollTop)}))},t.attachEvent?t.attachEvent(\"on\"+n,a):t.addEventListener(n,a,!1);var o=null;e.FloatFixed=function(e){var t=e.id,n=e.bottomEdgeId,a=e.offsetTop,s=void 0===a?0:a,u=document.getElementById(t);if(u){var c=0,l=0,d=0,f=0,p=function(){u&&(d=u.offsetHeight,l=u.parentNode.offsetWidth,c=function(e){for(var t=e.offsetTop,n=e.offsetParent;null!==n;)t+=n.offsetTop,n=n.offsetParent;return t}(u.parentNode)-s),n&&(f=document.getElementById(n).offsetTop)};p(),i.push(p);var m=function(e,t){f&&t+d>f?(u.style.position=\"fixed\",u.style.top=\"-\".concat(t+d-f,\"px\"),l&&(u.style.width=l+\"px\")):t-c>0?(u.style.position=\"fixed\",u.style.top=s+\"px\",l&&(u.style.width=l+\"px\")):(u.style.position=\"relative\",u.style.top=\"0px\",u.style.width=\"auto\")};return r.push(m),o||(o=setInterval((function(){i.map((function(e){return e()}))}),3e3)),{remove:function(){r.map((function(e,t){e===m&&r.splice(t,1)})),0==r.length&&(clearInterval(o),o=null)}}}console.error(\"Warning: not found \"+t+\" element.\")}}}(\"undefined\"!=typeof window?window:{})},497:function(e,t,n){\"use strict\";!function(){if(\"undefined\"!=typeof window&&\"undefined\"!=typeof document){var e=\".load-demand { display: block-inline; }\",t=document.getElementsByTagName(\"head\")[0],n=document.createElement(\"style\");n.type=\"text/css\",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n);var a=document.documentElement.clientHeight;window.addEventListener(\"resize\",(function(e){a=document.documentElement.clientHeight}),!1);setInterval((function(){!function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,t=document.getElementsByClassName(\"load-demand\");document.getElementById(\"posts-modal\")&&-1!=document.getElementById(\"posts-modal\").className.indexOf(\"show\")&&(e=document.getElementById(\"posts-modal\").scrollTop);for(var n=0,i=t.length;n<i;n++)if(!t[n].innerHTML){var o=t[n].getAttribute(\"data-load-demand\");if(\"\"!=o){o=decodeURIComponent(o);var s=r(t[n]),u=s+t[n].offsetHeight-a/2;(e<=s&&s<e+a||e<u&&u<e+a)&&(t[n].innerHTML=o+t[n].innerHTML)}}}()}),500)}function r(e){for(var t=e.offsetTop,n=e.offsetParent;null!==n;)t+=n.offsetTop,n=n.offsetParent;return t}}()},502:function(e,t,n){\"use strict\";(function(e){var t=x(n(0)),a=x(n(51)),r=n(115),i=n(168),o=n(40),s=x(n(273)),u=x(n(523)),c=x(n(525)),l=x(n(531)),d=I(n(299)),f=I(n(292)),p=n(77),m=n(119);n(588);var v,h=n(78),y=n(177),g=n(88),_=n(293),b=x(n(300)),w=x(n(590));function k(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return k=function(){return e},e}function I(e){if(e&&e.__esModule)return e;var t=k();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}}return n.default=e,t&&t.set(e,n),n}function x(e){return e&&e.__esModule?e:{default:e}}function T(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}u.default.install(),(v=regeneratorRuntime.mark((function n(){var u,v,k,I,x,T,S,E;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=(0,c.default)(window.__initState__),v=null,!(k=window.inAppShell||!1)){n.next=10;break}return n.next=6,(0,w.default)(u);case 6:return n.next=8,new Promise((function(t,n){e.ajax({url:\"/sign/check\",type:\"post\",success:function(e){e&&e.signIn&&!e.error&&(u.dispatch({type:\"SET_USER\",userinfo:e.userInfo}),e.accessToken&&u.dispatch({type:\"ADD_ACCESS_TOKEN\",access_token:e.accessToken})),v=(0,h.getUserInfo)(u.getState()),t()},error:function(e){t()}})}));case 8:n.next=11;break;case 10:v=(0,h.getUserInfo)(u.getState());case 11:return(0,y.initUnlockToken)()(u.dispatch,u.getState),(0,g.requestNotificationPermission)()(u.dispatch,u.getState),I=function(e){},p.GA&&(x={},v&&(x.userId=v._id),s.default.initialize(p.GA,{debug:m.debug,gaOptions:x}),I=function(e){s.default.pageview(window.location.pathname+window.location.search)}),T=(0,l.default)({user:v,enterEvent:I}),S=T.dom,d.connect(u),E=null,T.list.some((function(e){var t=(0,o.matchPath)(window.location.pathname,e);if(t&&t.path)return E=e,!0})),n.next=22,E.body.preload();case 22:k&&(e(\"#app\")[0].innerHTML=\"\"),a.default.hydrate(t.default.createElement(i.Provider,{store:u},t.default.createElement(r.BrowserRouter,null,t.default.createElement(S,null))),e(\"#app\")[0]),e(\"body\").append('<div style=\"display:none\">'.concat(p.analysisScript,\"</div>\")),f.isSafari()&&document.addEventListener(\"touchmove\",(function(e){e.preventDefault()})),(0,_.initHasRead)()(u.dispatch,u.getState),(0,b.default)(v);case 29:case\"end\":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var r=v.apply(e,t);function i(e){T(r,n,a,i,o,\"next\",e)}function o(e){T(r,n,a,i,o,\"throw\",e)}i(void 0)}))})()}).call(this,n(68))},523:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=o(n(524)),r=o(n(116));function i(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}return n.default=e,t&&t.set(e,n),n}function s(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,u,\"next\",e)}function u(e){s(i,a,r,o,u,\"throw\",e)}o(void 0)}))}}var c={get:function(){return new Promise((function(e){\"serviceWorker\"in navigator?navigator.serviceWorker.getRegistrations().then((function(t){e(t)})):e(null)}))},install:function(){return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,a.install();case 3:t();case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},uninstall:function(){return new Promise(function(){var e=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:\"serviceWorker\"in navigator?navigator.serviceWorker.getRegistrations().then((function(e){var n=!0,a=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){i.value.unregister()}}catch(e){a=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}t()})).catch((function(e){t()})):t();case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},l=c;t.default=l,r.set(\"service-worker\",c)},525:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.createStore)((0,a.combineReducers)(i.default),e,(0,a.compose)(a.applyMiddleware.apply(void 0,c)))};var a=n(163),r=u(n(526)),i=u(n(527)),o=n(530),s=n(119);function u(e){return e&&e.__esModule?e:{default:e}}var c=[r.default];s.reduxLog&&c.push((0,o.createLogger)())},527:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=I(n(528)),r=I(n(78)),i=I(n(284)),o=I(n(285)),s=I(n(174)),u=I(n(173)),c=I(n(286)),l=I(n(169)),d=I(n(287)),f=I(n(294)),p=I(n(295)),m=I(n(296)),v=I(n(297)),h=I(n(288)),y=I(n(170)),g=I(n(289)),_=I(n(298)),b=I(n(175)),w=I(n(529)),k=I(n(290));function I(e){return e&&e.__esModule?e:{default:e}}var x={scroll:a.default,user:r.default,notification:i.default,people:o.default,topic:u.default,posts:s.default,comment:c.default,website:l.default,countries:d.default,captcha:f.default,follow:p.default,reportTypes:m.default,block:v.default,feed:h.default,tips:y.default,hasReadPosts:g.default,message:_.default,session:b.default,clientInstalled:w.default,live:k.default};t.default=x},528:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"SAVE_SCROLL_POSITION\":t.name&&(e[t.name]=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0);break;case\"SET_SCROLL_POSITION\":window.scrollTo(0,t.name&&e[t.name]?e[t.name]:0)}return(0,r.default)(e)}},529:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getClientInstalled=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"HAS_CLIENT_INSTALLED\":var n=t.name;e[n]=!0;break;default:return e}return(0,r.default)(e)};t.getClientInstalled=function(e){return e.clientInstalled}},531:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=s(n(0)),r=n(115),i=s(n(532)),o=s(n(533));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.user,s=e.enterEvent,u=void 0===s?function(){}:s;return{list:o.default,dom:function(e){return a.default.createElement(\"div\",null,a.default.createElement(r.Switch,null,o.default.map((function(e,t){return a.default.createElement(r.Route,{key:t,path:e.path,exact:e.exact,component:e.head})}))),a.default.createElement(r.Switch,null,o.default.map((function(e,n){if(e.body)return a.default.createElement(r.Route,{key:n,path:e.path,exact:e.exact,render:function(n){return function(e,n,i,o){switch(u(),e){case\"everybody\":return a.default.createElement(n,i);case\"tourists\":return t?a.default.createElement(r.Redirect,{to:\"/\"}):a.default.createElement(n,i);case\"member\":return t?a.default.createElement(n,i):a.default.createElement(r.Redirect,{to:\"/\"})}}(e.enter,e.body,n)}})}))),a.default.createElement(i.default,{load:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(12)]).then(n.t.bind(null,707,7))}},(function(e){return a.default.createElement(e,null)})))}}}},532:function(e,t,n){\"use strict\";var a;function r(e){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var c=function(e){function t(e){var n,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),a=this,n=!(i=o(t).call(this,e))||\"object\"!==r(i)&&\"function\"!=typeof i?s(a):i,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(s(n),\"state\",{mod:null}),n.load=n.load.bind(s(n)),n}var n,a,c;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(a=[{key:\"componentDidMount\",value:function(){this.load()}},{key:\"load\",value:function(){var e=this;this.setState({mod:null}),this.props.load().then((function(t){e.setState({mod:t.default?t.default:t})}))}},{key:\"render\",value:function(){return this.state.mod?this.props.children(this.state.mod):null}}])&&i(n.prototype,a),c&&i(n,c),t}(((a=n(0))&&a.__esModule?a:{default:a}).default.Component);t.default=c},533:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=o(n(0)),r=o(n(534)),i=o(n(535));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={exact:!0,head:i.default},d=function(){return a.default.createElement(\"div\",null)},f=[u({path:\"/\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(10)]).then(n.t.bind(null,718,7))},loading:d})}),u({path:\"/topic\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(20)]).then(n.t.bind(null,730,7))},loading:d})}),u({path:\"/topic/:id\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(24)]).then(n.t.bind(null,732,7))},loading:d})}),u({path:\"/posts/:id\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(4),n.e(11)]).then(n.t.bind(null,734,7))},loading:d})}),u({path:\"/comment/:id\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(4),n.e(13)]).then(n.t.bind(null,742,7))},loading:d})}),u({path:\"/people/:id\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(7)]).then(n.t.bind(null,301,7))},loading:d})}),u({path:\"/people/:id/:type\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(7)]).then(n.t.bind(null,301,7))},loading:d})}),u({path:\"/notifications\"},l,{enter:\"member\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.t.bind(null,302,7))},loading:d})}),u({path:\"/notifications/:type\"},l,{enter:\"member\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.t.bind(null,302,7))},loading:d})}),u({path:\"/sessions\"},l,{enter:\"member\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(17)]).then(n.t.bind(null,751,7))},loading:d})}),u({path:\"/session/:id\"},l,{enter:\"member\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(14)]).then(n.t.bind(null,754,7))},loading:d})}),u({path:\"/live/:id\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(16)]).then(n.t.bind(null,758,7))},loading:d})}),u({path:\"/search\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(19)]).then(n.t.bind(null,761,7))},loading:d})}),u({path:\"/forgot\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(18)]).then(n.t.bind(null,764,7))},loading:d})}),u({path:\"/new-posts\"},l,{enter:\"member\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(15)]).then(n.t.bind(null,765,7))},loading:d})}),u({path:\"/settings\"},l,{enter:\"member\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(9)]).then(n.t.bind(null,767,7))},loading:d})}),u({path:\"/oauth\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(27)]).then(n.t.bind(null,771,7))},loading:d})}),u({path:\"/notice\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(26)]).then(n.t.bind(null,772,7))},loading:d})}),u({path:\"/block/peoples\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(5)]).then(n.t.bind(null,178,7))},loading:d})}),u({path:\"/block/posts\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(5)]).then(n.t.bind(null,178,7))},loading:d})}),u({path:\"/block/comments\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(5)]).then(n.t.bind(null,178,7))},loading:d})}),u({path:\"/agreement\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(21)]).then(n.t.bind(null,774,7))},loading:d})}),u({path:\"/privacy\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(23)]).then(n.t.bind(null,775,7))},loading:d})}),u({path:\"/links\"},l,{enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(22)]).then(n.t.bind(null,776,7))},loading:d})}),{path:\"**\",head:i.default,exact:!1,enter:\"everybody\",body:(0,r.default)({loader:function(){return Promise.all([n.e(0),n.e(25)]).then(n.t.bind(null,777,7))},loading:d})}];t.default=f},535:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(){var e=(0,o.default)(),t=e.history,n=e.location,g=(e.match,(0,l.useStore)()),_=(0,l.useSelector)((function(e){return(0,f.getUserInfo)(e)})),w=(0,l.useSelector)((function(e){return(0,p.getUnreadNotice)(e)})),k=(0,l.useSelector)((function(e){return(0,m.getTipsById)(e,\"unread-message\")||0})),I=(0,l.useSelector)((function(e){return(0,m.getTipsById)(e,\"feed\")})),x=(0,l.useSelector)((function(e){return(0,m.getTipsById)(e,\"favorite\")})),T=(0,l.useSelector)((function(e){return(0,m.getTipsById)(e,\"home\")})),S=(0,l.useSelector)((function(e){return(0,p.getTab)(e)}))||\"home\",E=function(e){return(0,v.saveTab)(e)(g.dispatch,g.getState)},O=function(e){\"/\"==n.pathname?(0,h.saveScrollPosition)(S)(g.dispatch,g.getState):t.push(\"/\"),(new s.default).set(\"tab\",e,{path:\"/\",expires:new Date((new Date).getTime()+31536e6)}),E(e),c.GA&&u.default.pageview(window.location.pathname+\"?tab=\"+e),setTimeout((function(){(0,h.setScrollPosition)(e)(g.dispatch,g.getState)}),100)},P=function(e){return function(t){t.preventDefault(),O(e)}},N=[{_id:\"home\",name:\"发现\",subscript:T}];_&&(N.push({_id:\"follow\",name:\"关注\",subscript:I}),N.push({_id:\"favorite\",name:\"收藏\",subscript:x}));var M=(0,l.useSelector)((function(e){return(0,y.getTopicListById)(e,\"parent-topics\")}));M&&M.data&&M.data.length>0&&M.data.map((function(e){N.push({_id:e._id,topic_id:e._id,name:e.name,avatar:e.avatar})}));return N.push({_id:\"live\",name:\"直播\"}),(0,r.useEffect)((function(){var e=(new s.default).get(\"tab\")||\"home\";return E(e),\"/\"==n.pathname&&setTimeout((function(){(0,h.setScrollPosition)(S)(g.dispatch,g.getState)}),100),function(){if(\"/\"==n.pathname){var e=(0,p.getTab)(g.getState());(0,h.saveScrollPosition)(e)(g.dispatch,g.getState)}}}),[]),r.default.createElement(r.default.Fragment,null,r.default.createElement(\"div\",{className:\"_2bqIO\"}),r.default.createElement(\"header\",{className:\"ncTgo\"},r.default.createElement(\"div\",{className:\"container\"},r.default.createElement(\"div\",{className:\"d-flex justify-content-between\"},r.default.createElement(i.Link,{to:\"/\",className:\"_22NTI\"}),r.default.createElement(\"nav\",{className:\"d-block d-lg-none\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\"},N.map((function(e){var t=e._id,n=e.topic_id,a=e.name,i=e.subscript;if(S===t)return r.default.createElement(\"a\",{key:t,href:n?\"/topic/\".concat(n):\"/\",className:\"text-dark _3pC16\",onClick:P(t)},a,i?r.default.createElement(\"span\",{className:\"bpHlU\"}):null,r.default.createElement(\"div\",{className:\"_3uK3A\"},r.default.createElement(\"svg\",null,r.default.createElement(\"use\",{xlinkHref:\"/feather-sprite.svg#chevron-down\"}))))}))),r.default.createElement(\"div\",{className:\"dropdown-menu dropdown-menu-left\"},N.map((function(e){var t=e._id,n=e.topic_id,a=e.name,i=e.subscript,o=e.avatar;return r.default.createElement(\"a\",{key:t,href:n?\"/topic/\".concat(n):\"/\",className:\"dropdown-item\",onClick:P(t)},o?r.default.createElement(\"img\",{className:\"ztsS2\",src:o,alt:a}):r.default.createElement(\"div\",{className:\"ztsS2\"}),a,i?r.default.createElement(\"span\",{className:\"_19j0F\"}):null)}))),r.default.createElement(\"nav\",{className:\"d-none d-lg-block\"},N.map((function(e){var t=e._id,i=e.topic_id,o=e.name,s=e.subscript;return r.default.createElement(\"a\",{key:t,href:i?\"/topic/\".concat(i):\"/\",onClick:P(t),className:(S===t&&\"/\"==n.pathname||\"text-dark\"?(S===t&&\"/\"==n.pathname?\"text-primary\":\"text-dark\")+\" \":\"\")+(0,a.default)(\"nav-item \".concat(S===t&&\"/\"==n.pathname?\"active\":\"\"),b)},o,s?r.default.createElement(\"span\",{className:\"bpHlU\"}):null)}))),r.default.createElement(\"div\",{className:\"ml-auto d-flex justify-content-start\"},_?r.default.createElement(r.default.Fragment,null,r.default.createElement(i.NavLink,{exact:!0,to:\"/new-posts\",className:\"text-primary gy3SZ\"},r.default.createElement(\"svg\",null,r.default.createElement(\"use\",{xlinkHref:\"/feather-sprite.svg#edit-3\"}))),r.default.createElement(i.NavLink,{exact:!0,to:\"/search\",className:\"text-secondary gy3SZ\"},r.default.createElement(\"svg\",null,r.default.createElement(\"use\",{xlinkHref:\"/feather-sprite.svg#search\"}))),r.default.createElement(i.NavLink,{exact:!0,to:\"/notifications\",className:\"text-secondary gy3SZ\"},r.default.createElement(\"svg\",null,r.default.createElement(\"use\",{xlinkHref:\"/feather-sprite.svg#bell\"})),w.length>0?r.default.createElement(\"span\",{className:\"_3Iqk_\"},w.length):null),r.default.createElement(i.NavLink,{exact:!0,to:\"/sessions\",className:\"text-secondary gy3SZ\"},r.default.createElement(\"svg\",null,r.default.createElement(\"use\",{xlinkHref:\"/feather-sprite.svg#message-circle\"})),k>0?r.default.createElement(\"span\",{className:\"_3Iqk_\"},k):null),r.default.createElement(\"span\",{\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",className:\"a _27wGY\",style:{backgroundImage:\"url(\".concat(_.avatar_url,\")\")}}),r.default.createElement(\"div\",{className:\"dropdown-menu dropdown-menu-left\"},r.default.createElement(i.Link,{className:\"dropdown-item\",to:\"/people/\".concat(_._id)},\"我的主页\"),r.default.createElement(i.Link,{className:\"dropdown-item\",to:\"/settings\"},\"设置\"),r.default.createElement(\"div\",{className:\"dropdown-divider\"}),r.default.createElement(\"span\",{className:\"a dropdown-item\",onClick:function(){O(\"home\"),(0,d.signOut)()(g.dispatch,g.getState)}},\"退出\"))):r.default.createElement(\"div\",{className:\"d-flex flex-row\"},r.default.createElement(\"a\",{href:\"https://www.xiaoduyu.com/app/xiaoduyu/\",target:\"_blank\",className:\"a text-dark d-block d-lg-none _3pC16\"},\"下载\"),r.default.createElement(\"span\",{\"data-toggle\":\"modal\",\"data-target\":\"#sign\",\"data-type\":\"sign-up\",className:\"a text-dark _3pC16\"},\"注册账号\"),r.default.createElement(\"span\",{\"data-toggle\":\"modal\",\"data-target\":\"#sign\",\"data-type\":\"sign-in\",className:\"a text-dark _3pC16\"},\"登录\")))))))};var a=_(n(280)),r=function(e){if(e&&e.__esModule)return e;var t=g();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n(0)),i=n(115),o=_(n(277)),s=_(n(690)),u=_(n(273)),c=n(77),l=n(168),d=n(282),f=n(78),p=n(169),m=n(170),v=n(88),h=n(278),y=n(173);function g(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function _(e){return e&&e.__esModule?e:{default:e}}n(557);var b={\"./styles/index.scss\":{\"header-space\":\"_2bqIO\",header:\"ncTgo\",logo:\"_22NTI\",\"nav-item\":\"_3pC16\",active:\"_2D0w4\",arrow:\"_3uK3A\",\"topic-avatar\":\"ztsS2\",\"svg-icon\":\"gy3SZ\",avatar:\"_27wGY\",edit:\"_3WYbH\",subscript:\"bpHlU\",\"subscript-on-menu\":\"_19j0F\",\"unread-subscript\":\"_3Iqk_\"}}},538:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a,r=(a=n(539))&&a.__esModule?a:{default:a};t.default=function(e){var t=e.url,n=e.method,a=void 0===n?\"get\":n,i=e.data,o=void 0===i?{}:i,s=e.headers,u={url:t,method:a,headers:void 0===s?{}:s};return\"get\"==a?(o._t=(new Date).getTime(),u.params=o):\"post\"==a&&(u.data=o),(0,r.default)(u).then((function(e){return e&&e.data?[null,e.data]:[\"return none\"]})).catch((function(e){return e.message?[e.message]:e.response&&e.response.data?[e.response.data]:[\"return error\"]}))}},585:function(e,t){},590:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var a=n(279),r=n(283);function i(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}t.default=function(e,t){return new Promise(function(){var n,o=(n=regeneratorRuntime.mark((function n(i){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,r.loadTopicList)({id:\"parent-topics\",args:{parent_id:\"not-exists\",sort_by:\"sort:-1\",recommend:!0}})(e.dispatch,e.getState);case 2:if(n.prev=2,!t){n.next=10;break}return n.next=6,(0,a.loadUserInfo)({accessToken:t})(e.dispatch,e.getState);case 6:o=n.sent,i(o),n.next=11;break;case 10:i([]);case 11:n.next=17;break;case 13:n.prev=13,n.t0=n.catch(2),console.log(n.t0),i([]);case 17:case\"end\":return n.stop()}}),n,null,[[2,13]])})),function(){var e=this,t=arguments;return new Promise((function(a,r){var o=n.apply(e,t);function s(e){i(o,a,r,s,u,\"next\",e)}function u(e){i(o,a,r,s,u,\"throw\",e)}s(void 0)}))});return function(e){return o.apply(this,arguments)}}())}},77:function(e,t,n){\"use strict\";var a={debug:!1,port:4e3,domainName:\"http://ddfantasies.com\",name:\"小度鱼\",description:\"年轻人的交流社区\",contactEmail:\"hi@abcd.com\",ICPNumber:\"\",gongWangAnBei:\"\",authCookieName:\"token\",classScopedName:\"[hash:base64:5]\",publicPath:\"//ddfantasies.com:4000\",api:{domain:\"api.ddfantasies.com\",graphql:{client:\"http://api.ddfantasies.com:9002/graphql\",server:\"http://api.ddfantasies.com:9002/graphql\"},socket:\"http://ddfantasies.com\"},GA:\"\",googleAdSense:{client:\"\",slot:{pc:\"\",h5:\"\"}},social:{weibo:!0,qq:!0,github:!0,wechat:!1},favicon:'<link rel=\"icon\" href=\"/512x512.png\" type=\"image/png\" />',head:'\\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0\">\\n    <link rel=\"apple-touch-icon\" href=\"/512x512.png\">\\n    <meta content=\"yes\" name=\"apple-touch-fullscreen\">\\n    <meta content=\"yes\" name=\"apple-mobile-web-app-capable\">\\n  ',analysisScript:\"\",qiniu:{uploadUrl:{http:\"http://upload.qiniu.com\",https:\"https://up.qbox.me/\"}},AMP:{logo:{url:\"/600x60.png\",width:600,height:60}}};a.head+=a.favicon,a.AMP.logo.url=a.domainName+a.AMP.logo.url;e.exports=a},78:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getUnlockToken=t.getAccessToken=t.getUserInfo=t.default=void 0;var a,r=(a=n(12))&&a.__esModule?a:{default:a};var i={userInfo:null,accessToken:\"\",expires:0,unlockToken:\"\"};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)(i),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"ADD_ACCESS_TOKEN\":t.access_token&&(e.accessToken=t.access_token);break;case\"REMOVE_ACCESS_TOKEN\":e.accessToken=\"\",e.expires=0;break;case\"SET_USER\":t.userinfo&&(e.userInfo=t.userinfo);break;case\"ADD_UNLOCK_TOKEN\":t.unlockToken&&(e.unlockToken=t.unlockToken);break;default:return e}return(0,r.default)(e)};t.getUserInfo=function(e){return e.user.userInfo};t.getAccessToken=function(e){return e.user.accessToken};t.getUnlockToken=function(e){return e.user.unlockToken}},88:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.setOnlineUserCount=function(e){return function(t,n){t({type:\"SET_ONLINE_STATUS\",online:e})}},t.saveTopicId=function(e){return function(t,n){t({type:\"SET_TOPIC_ID\",topicId:e})}},t.saveTab=function(e){return function(t,n){t({type:\"SET_TAB\",tab:e})}},t.requestNotificationPermission=function(){return function(e,t){\"Notification\"in window&&Notification.requestPermission((function(t){\"granted\"==t&&e({type:\"SET_NOTIFICATION_PERMISSION\",status:!0})}))}},t.sendNotification=function(e){var t=e.content,n=e.option;return(function(){var e=u(regeneratorRuntime.mark((function e(a,r){var o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=new Notification(t,n),s=\"\",o.onclick=function(e){switch(e.target.tag){case\"message\":s=\"/sessions\";break;case\"comment\":s=\"/comment/\"+(n.data.comment_id.parent_id?n.data.comment_id.parent_id:n.data.comment_id._id)}if(s){var t=i.get(\"history\");t&&t.push(s)}o.close()};case 3:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},t.loadOperatingStatus=function(){return function(e,t){return new Promise(function(){var t=u(regeneratorRuntime.mark((function t(n){var a,i,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,r.default)({apis:[{api:\"countPosts\",args:{},fields:\"count\"},{api:\"countUsers\",args:{},fields:\"count\"},{api:\"countComments\",args:{parent_id:\"not-exists\"},fields:\"count\"},{api:\"countComments\",args:{parent_id:\"exists\"},fields:\"count\",aliases:\"countReply\"}]});case 2:a=t.sent,c=2,i=function(e){if(Array.isArray(e))return e}(u=a)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(u,c)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}(),o=i[0],s=i[1],e({type:\"SET_OPERATING_STATUS\",data:s}),n([o,s]);case 8:case\"end\":return t.stop()}var u,c}),t)})));return function(e){return t.apply(this,arguments)}}())}};var a,r=(a=n(48))&&a.__esModule?a:{default:a},i=function(e){if(e&&e.__esModule)return e;var t=o();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n(116));function o(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e,t,n,a,r,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){s(i,a,r,o,u,\"next\",e)}function u(e){s(i,a,r,o,u,\"throw\",e)}o(void 0)}))}}}});","extractedComments":[]}